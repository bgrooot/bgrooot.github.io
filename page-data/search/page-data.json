{"componentChunkName":"component---src-pages-search-tsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"rawMarkdownBody":"\n**ë¸”ë¡œê·¸ë¥¼ ë‚ ë ¤ë¨¹ì—ˆë‹¤ê°€ ë³µêµ¬í•´ì„œ ì´ë¯¸ì§€ê°€ ê¹¨ì ¸ìˆìŠµë‹ˆë‹¤ ã… ã… **  \n*(ì‚¬ë‚´ ìœ„í‚¤ì— ì¼ì—ˆë˜ ê¸€ì„ ì˜®ê¹ë‹ˆë‹¤.)*\n\nì‹¤í—˜ ê²°ê³¼ë¡œì„œ íƒ€ì„ì•„ì›ƒì„ ì¤„ì´ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ì™€ ê´€ê³„ê°€ ìˆë‹¤ëŠ” ê²ƒì€ ì•Œì•˜ì§€ë§Œ ì™œ ê·¸ëŸ°ì§€ ê¶ê¸ˆí•˜ì—¬ ì¡°ì‚¬í•´ ë³¸ ê²°ê³¼ë¥¼ ì •ë¦¬í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. (ì›ë˜ ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ êµ¬ì¡°ë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•˜ëŠ” ê¸€ì„ ì €ë„ ê³µë¶€í•˜ë©´ì„œ ì¨ë³¼ê¹Œ í–ˆëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¤ ë¯¸ë£¨ì—ˆìŠµë‹ˆë‹¤...)\n\n### Filter Chain\nìŠ¤í”„ë§ ì‹œíë¦¬í‹°ëŠ” ìš”ì²­ì„ í•„í„° ì²´ì¸ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ì„¸ì…˜ì„ ì‚¬ìš© í•˜ëŠ” í•„í„°ëŠ” `SecurityContextPersistenceFilter`ì™€ `SessionManagementFilter`ê°€ ìˆëŠ”ë° ê°„ëµí™”í•´ì„œ `SecurityContextPersistenceFilter`ì˜ ë™ì‘ì— ëŒ€í•´ì„œë§Œ ê¸°ìˆ í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\n\n![](../src/images/spring-security-filter-chain.jpeg)\n\n### SecurityContextHolder\nìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì—ì„œ ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê³³ ì…ë‹ˆë‹¤. ì¸ì¦ëœ ì‚¬ìš©ìëŠ” Contextì— ì •ë³´ê°€ ì±„ì›Œì§€ê²Œ ë©ë‹ˆë‹¤. ThreadLocalë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n![](../src/images/spring-security-context-holder.png)\n\n### SecurityContextPersistenceFilter\nì´ í•„í„°ëŠ” í•„í„° ì²´ì¸ ì¤‘ì— ìƒìœ„ì— ìœ„ì¹˜í•˜ì—¬ `SecurityContextRepository` ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶€í„° ì–»ëŠ” ì •ë³´ë¡œ `SecurityContextHolder`ë¥¼ ì±„ì›Œ ì¤ë‹ˆë‹¤. ì½”ë“œë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.\n\n1. SecurityContextRepositoryì—ì„œ SecurityContextë¥¼ ê°€ì§€ê³  ì˜´. ë¶ˆëŸ¬ì˜¨ SecurityContextë¥¼ SecurityContextHolderì— ì„¤ì •.\n2. ì²´ì¸ í•„í„° ìˆ˜í–‰.\n3. SecurityContextHolder í´ë¦¬ì–´.\n4. ì €ì¥ë˜ì–´ ìˆë˜ SecurityContextHolderë¥¼ SecurityContextRepositoryì— ì €ì¥.\n\n```java\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\n                throws IOException, ServletException {\n\n        .\n        .\n        .\n\n        HttpRequestResponseHolder holder = new HttpRequestResponseHolder(request,\n                response);\n        SecurityContext contextBeforeChainExecution = repo.loadContext(holder);\n\n        try {\n            SecurityContextHolder.setContext(contextBeforeChainExecution);\n\n            chain.doFilter(holder.getRequest(), holder.getResponse());\n\n        }\n        finally {\n            SecurityContext contextAfterChainExecution = SecurityContextHolder\n                    .getContext();\n            // Crucial removal of SecurityContextHolder contents - do this before anything\n            // else.\n            SecurityContextHolder.clearContext();\n            repo.saveContext(contextAfterChainExecution, holder.getRequest(),\n                    holder.getResponse());\n            request.removeAttribute(FILTER_APPLIED);\n\n            .\n            .\n            .\n        }\n    }\n```\nê¸°ë³¸ì ìœ¼ë¡œ `SecurityContextRepository`ëŠ” HttpSessionì„ ì‚¬ìš©í•˜ëŠ” `HttpSessionSecurityContextRepository`ìœ¼ë¡œ ì„¤ì •ë˜ì–´ Sessionì— ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤. ìš”ì•½í•˜ìë©´, ì¸ì¦ í•„í„°ë“¤ì´ ìˆ˜í–‰ë˜ê¸° ì „ì— ì¸ì¦ ì •ë³´ë¥¼ ì„¸ì…˜ì—ì„œ êº¼ë‚´ì„œ ì„¤ì • í•´ì£¼ê³  í•„í„°ê°€ ìˆ˜í–‰ë˜ë©´ ë‹¤ì‹œ ì„¸ì…˜ì— ì €ì¥í•´ ì¤ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´â€¦ ì„¸ì…˜ì— ì„¤ì •í•œë‹¤ëŠ” ê²ƒì´ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°€ì§€ê³  ìˆì„ê¹Œìš”?\n\n### Session\në‚˜ë¬´ìœ„í‚¤ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n> ì›¹ ì„œë²„ì—ì„œ ì„ì‹œë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ë°ì´í„°ë¥¼ ê°ˆë¬´ë¦¬í•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤. ì¿ í‚¤ì™€ ì—­í• ì´ ë¹„ìŠ·í•œë°, ì¿ í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ë°ì´í„°ë¥¼ ê°ˆë¬´ë¦¬í•˜ëŠ” ë°˜ë©´ì— ì„¸ì…˜ì€ ì„œë²„ ì¸¡ì— ë°ì´í„°ë¥¼ ê°ˆë¬´ë¦¬í•´ ë†“ëŠ”ë‹¤ëŠ” ì°¨ì´ì ì´ ìˆë‹¤. ì£¼ë¡œ ë¡œê·¸ì¸, ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì˜ ì¥ë°”êµ¬ë‹ˆ ë“±ì— ì“°ì¸ë‹¤.\n\ní´ë¼ì´ì–¸íŠ¸ì˜ ì •ë³´ë¥¼ ì„œë²„ì— ì €ì¥í•˜ëŠ” ê²ƒ ì •ë„ê°€ ë˜ê² ìŠµë‹ˆë‹¤. ì„¸ì…˜ì€ íŒŒì¼, DB, In-Memory, Redis ë“±ë“±ì— ì €ì¥í•  ìˆ˜ ìˆëŠ”ë° ìš°ë¦¬ê°€ ì“°ëŠ” Undertowì—ì„œëŠ” InMemorySessionManagerë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ In-Memoryì— ì„¸ì…˜ì„ ì €ì¥í•©ë‹ˆë‹¤. ë‹¤ì‹œ ìœ„ì˜ ìš”ì•½ìœ¼ë¡œ ëŒì•„ê°€ì„œ ì„¸ì…˜ì—ì„œ êº¼ë‚´ ì¸ì¦ ìƒíƒœë¡œ ë§Œë“œë‹¤ëŠ” ê²ƒì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ëŠ” HTTP í”„ë¡œí† ì½œì€ ë¬´ìƒíƒœì„±(Stateless)ì„ ê°€ì§€ê³  ìˆëŠ”ë° ë™ì¼í•œ ì„¸ì…˜ì´ê³  ì´ë¯¸ ì¸ì¦ë˜ì—ˆë‹¤ë©´ ì¸ì¦ëœ ìƒíƒœë¡œ ë§Œë“¤ì–´ ì£¼ëŠ” ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n### ê·¸ë˜ì„œ?\nìš°ë¦¬ í”Œë«í¼ì—ì„œ ì¸ì¦ì€ í ë¦­ìŠ¤ê°€ ë§Œë“¤ì–´ ì¤€ ëŒë‹¤ì—ì„œ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì€ í—¤ë”ì— ë‹´ì•„ì„œ ë³´ë‚´ì¤ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì§€ê¸ˆì—ì•¼ ë“œëŠ” ìƒê°ì´ì§€ë§Œ, ìš”ì²­ ë¼ë¦¬ ì¸ì¦ ê²°ê³¼ë¥¼ ê³µìœ í•˜ì§€ ì•Šì•„ë„ ë  ë“¯ í•©ë‹ˆë‹¤. ì„¸ì…˜ì—ì„œ ì¸ì¦ëœ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì™€ `SecurityContextPersistenceFilter`ë’¤ì˜ ì¸ì¦ í•„í„°ë“¤(UsernamePasswordAuthenticationFilter, BasicAuthenticationFilter)ì—ì„œì˜ ì¸ì¦ ì‹œë„ë¥¼ ê±´ë„ˆë›´ë‹¤ê³  í•˜ë”ë¼ë„ ì¸ì¦ í•„í„°ì—ì„œ ì˜¤ë˜ ì†Œìš”ë˜ëŠ” ì‘ì—…ì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— í° ì˜í–¥ì€ ì—†ì„ ë“¯ í•©ë‹ˆë‹¤. (íƒ€ì•”ì•„ì›ƒì„ ì„¤ì •í–ˆì„ ë•Œì™€ í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ TPSë¥¼ ì¸¡ì •í•´ ë³´ë©´ ëª…í™•í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.)\n\nì°¾ì•„ë³´ë‹ˆ Spring Security Configì—ëŠ” SessionManagementì—ì„œ ì„¸ì…˜ ê´€ë ¨ ì„¤ì •ì„ í•  ìˆ˜ ìˆë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. SessionManagementì—ëŠ” ì„¤ì • í•„ë“œë“¤ ì¤‘ì—ëŠ” ìµœëŒ€ë¡œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì„¸ì…˜ ìˆ˜ë¥¼ ì„¤ì •í•˜ëŠ” maximumSessionsì™€ (ê¸°ë³¸ê°’ì€ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤.) ì„¸ì…˜ ìƒì„±ë°©ì‹ì„ ì„¤ì •í•˜ëŠ” sessionCreationPolicyê°€ ìˆìŠµë‹ˆë‹¤. sessionCreationPolicyì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n- ALWAYS - í•­ìƒ HttpSessionì„ ìƒì„±í•©ë‹ˆë‹¤.\n- NEVER - HttpSessionì´ ìˆì„ ë•Œë§Œ ì‚¬ìš©í•˜ê³  ë§Œë“¤ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.\n- IF_REQUIRED - í•„ìš”í•  ë•Œë§Œ HttpSessionì„ ë§Œë“­ë‹ˆë‹¤. (ê¸°ë³¸ ê°’)\n- STATELESS - HttpSessionì„ ë§Œë“¤ì§€ ì•Šê³  ì‚¬ìš©í•˜ì§€ë„ ì•ŠìŠµë‹ˆë‹¤.\n\nHttpSessionì„ ë§Œë“¤ê³  ì‚¬ìš©í•˜ì§€ ì•Šê¸°ìœ„í•´ STATELESSë¡œ ì„¤ì •í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ê°’ì´ STATELESSì¼ ë•ŒëŠ” `SecurityContextRepository`ë¡œ `NullSecurityContextRepository`ê°€ ì„ íƒë©ë‹ˆë‹¤. `NullSecurityContextRepository`ëŠ” ì•„ë˜ì™€ ê°™ì´ `SecurityContextPersistenceFilter`ì˜ í•„í„°ì—ì„œ ì•„ë¬´ëŸ° ì¼ë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n```java\npublic final class NullSecurityContextRepository implements SecurityContextRepository {\n\n\tpublic boolean containsContext(HttpServletRequest request) {\n\t\treturn false;\n\t}\n\n\tpublic SecurityContext loadContext(HttpRequestResponseHolder requestResponseHolder) {\n\t\treturn SecurityContextHolder.createEmptyContext();\n\t}\n\n\tpublic void saveContext(SecurityContext context, HttpServletRequest request,\n\t\t\tHttpServletResponse response) {\n\t}\n\n}\n```\nê·¸ëŸ¼ ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´ì•¼ê² ìŠµë‹ˆë‹¤.\n\n## í…ŒìŠ¤íŠ¸\nì»¤ë®¤ë‹ˆí‹° DEVë¥¼ ëŒ€ìƒìœ¼ë¡œ ì €ë²ˆê³¼ ê°™ì´ ëŒ“ê¸€ ì¡°íšŒí•˜ëŠ” APIë¥¼ í˜¸ì¶œí•˜ë ¤ê³  í•©ë‹ˆë‹¤. Scouter ë„ìš°ê³  nGinderë¡œ ë¶€í•˜ë¥¼ ì¤˜ ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ ê¸°ë³¸ ê°’(30m)ìœ¼ë¡œ ë‘ì—ˆì„ ë•Œì™€ ì ê²Œ ì¡°ì ˆ (5m) í–ˆì„ ë•Œ, ê·¸ë¦¬ê³  ì„¸ì…˜ì„ ì„¤ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ TPSì™€ Heap Memory ì‚¬ìš©ìœ¨ì„ í™•ì¸í•´ ë³´ë ¤ê³  í•©ë‹ˆë‹¤. nGinderì—ì„œ 500ëª…ì˜ ì‚¬ìš©ìë¡œ 10ë¶„ê°„ ê³„ì† í˜¸ì¶œ í•˜ë„ë¡ í•©ë‹ˆë‹¤. JAVA_OPTSëŠ” ì•„ë˜ì²˜ëŸ¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. CMS GCë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n```plain\njava -javaagent:/home/webapp/scouter/agent.java/scouter.agent.jar\n     -Dscouter.config=/home/webapp/scouter/agent.java/conf/scouter.conf\n     -Dobj_name=community-dev\n     -Dfile.encoding=UTF-8 -verbosegc\n     -Xloggc:/var/log/gc.log\n     -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:GCLogFileSize=10m -XX:NumberOfGCLogFiles=100\n     -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -jar application.jar\n```\n\n### ì„¸ì…˜ íƒ€ì„ ì•„ì›ƒì´ ê¸°ë³¸ ê°’ (30ë¶„) ì¼ ë•Œ\nì§€ë‚œ ë²ˆì— í…ŒìŠ¤íŠ¸ í–ˆë˜ ìƒí™©ì…ë‹ˆë‹¤. Heap ë©”ëª¨ë¦¬ê°€ ì ì°¨ ì°¨ì˜¤ë¥´ë‹¤ê°€ 6ë¶„ì •ë„ê°€ ì§€ë‚¬ì„ ë•Œ TPSê°€ ê¸‰ê°í–ˆìŠµë‹ˆë‹¤.\n\n![](../src/images/session-timeout-30m-tps.png)\n\n![](../src/images/session-timeout-30m-heap.png)\n\n### ì„¸ì…˜ íƒ€ì„ ì•„ì›ƒì„ 5ë¶„ìœ¼ë¡œ ì„¤ì • í–ˆì„ ë•Œ\nHeap ë©”ëª¨ë¦¬ê°€ ì°¨ëŠ” 6ë¶„ ì „ì— ì„¸ì…˜ì´ ë§Œë£Œë˜ê¸° ë•Œë¬¸ì— TPSê°€ ê¸‰ê°í•˜ëŠ” í˜„ìƒì´ ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n![](../src/images/session-timeout-5m-tps.png)\n\n![](../src/images/session-timeout-5m-heap.png)\n\n### ì„¸ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šì•˜ì„ ë•Œ\nTPSëŠ” í° ì°¨ì´ëŠ” ì—†ì—ˆê³  Heap ë©”ëª¨ë¦¬ê°€ ìš”ì²­ì— ë”°ë¼ ì¦ê°€í•˜ëŠ” í˜„ìƒì´ ì—†ì—ˆìŠµë‹ˆë‹¤.\n\n![](../src/images/no-session-tps.png)\n\n![](../src/images/no-session-heap.png)\n\n## ëìœ¼ë¡œ\n- SecurityContextHolderê°€ ì›ì¸ì¸ì¤„ ì•Œì•˜ëŠ”ë° Sessionì—ì„œ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì°¨ì§€í•˜ëŠ” í˜„ìƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\n- ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì–‘ì„ ë³€ê²½í•˜ê¸° ì „ì— ì„¸ì…˜ ì„¤ì •ì„ ë³€ê²½í•´ì•¼ ê² ìŠµë‹ˆë‹¤.\n- ê·¸ëŸ°ë° ì‹¤ì œë¡œ Sessionì„ ì‚¬ìš©í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ëŸ° í˜„ìƒì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ í• ê¹Œìš”? ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì¡ê±°ë‚˜ íƒ€ì„ì•„ì›ƒì„ ì¡°ì ˆí•˜ëŠ” ìˆ˜ ë°–ì— ì—†ì„ê¹Œìš”?\n- ë” ì´ìƒ ë©”ëª¨ë¦¬ ë¬¸ì œëŠ” ì—†ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.\n\n\n\n","excerpt":"â€¦","fields":{"slug":"/memory-leak-the-second/"},"frontmatter":{"date":"Dec 01, 2020","title":"ë‚´ê°€ ê²ªì€ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì´ì•¼ê¸° - ë‘ ë²ˆì§¸","tags":["springSecurity","memoryLeak","springDataJpa"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n\n### ë°œë‹¨\në‚´ê°€ ë§Œë“  í”„ë¡œì íŠ¸ ì¤‘ì—ëŠ” ì—ì„œëŠ” 2ê°œ ì´ìƒì˜ DataSourceë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ ìˆë‹¤. `Aurora RDS`ì˜ Reader, Writer ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°ë˜ëŠ” DataSourceë¥¼ ë§Œë“¤ê³  ì‚¬ìš©í•˜ê³  ìˆë‹¤. ì´ ë°©ë²•ì— ëŒ€í•œ ì‹¤íš¨ì„±ì€ ë…¼ì™¸ë¡œ í•˜ê³ , ê·¸ í”„ë¡œì íŠ¸ì—ì„œ ìµœê·¼ì— ëª¨ì¢…ì˜ ì´ìœ ë¡œ `Spring Boot Actuator`ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì œì™¸í–ˆë‹¤. ê·¸ëŸ°ë° ëª¨ë“ˆì„ ì œì™¸í•˜ê³  ë¹Œë“œë¥¼ ìˆ˜í–‰í•˜ë‹ˆ DataSource Beanì˜ ìˆœí™˜ ì°¸ì¡° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìš°ì„  HikariConfig Beanì„ ìƒì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³€ê²½í–ˆì§€ë§Œ ëª¨ë“ˆì˜ í¬í•¨ ì—¬ë¶€ê°€ DataSourceì˜ ìƒì„±ì— ì˜í–¥ì„ ì£¼ëŠ” ê²ƒì´ êµ‰ì¥íˆ ì˜ì•„í–ˆê¸° ë•Œë¬¸ì— ê·¸ ì´ìœ ë¥¼ ë¶„ì„í•´ ë³´ê³  ê²°ê³¼ë¥¼ ë‚¨ê²¨ë³´ë ¤ê³  í•œë‹¤. \n\n### ë¶„ì„\nì˜¤ë¥˜ ë©”ì‹œì§€ì™€ ì‚¬ìš©í–ˆë˜ ì½”ë“œë¥¼ ê°„ëµí™”í•œ ê²ƒì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n```text\nThe dependencies of some of the beans in the application context form a cycle:\n\n   org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration\nâ”Œâ”€â”€â”€â”€â”€â”\n|  communityDataSource defined in class path resource [ApplicationConfig.class]\nâ†‘     â†“\n|  writerCommunityDataSource defined in class path resource [ApplicationConfig.class]\nâ†‘     â†“\n|  org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker\nâ””â”€â”€â”€â”€â”€â”˜\n```\n\n```java\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    @ConfigurationProperties(prefix = \"spring.datasource.writer\")\n    public DataSource writerCommunityDataSource() {\n        return DataSourceBuilder.create()\n                .type(HikariDataSource.class)\n                .build();\n    }\n\n    @Primary\n    @Bean\n    public DataSource communityDataSource(DataSource writerCommunityDataSource) {\n        RoutingDataSource routingDataSource = new RoutingDataSource();\n        Map<Object, Object> targetDataSources = new HashMap<>();\n        targetDataSources.put(\"WRITER\", writerCommunityDataSource);\nroutingDataSource.setTargetDataSources(targetDataSources);\n        routingDataSource.setDefaultTargetDataSource(writerCommunityDataSource);\n\n        return routingDataSource;\n    }\n\n    private static class RoutingDataSource extends AbstractRoutingDataSource {\n\n        @Override\n        protected Object determineCurrentLookupKey() {\n            return \"WRITER\";\n        }\n    }\n}\n```\n\n[ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬](https://www.baeldung.com/circular-dependencies-in-spring)ëŠ” ê²½í—˜í•œ ì ì´ ìˆê¸° ë•Œë¬¸ì— ì–´ë–¤ ìƒí™©ì—ì„œ ë°œìƒí•˜ëŠ”ì§€ ì•Œê³  ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, `DataSourceInitializerInvoker`ê°€ ì™œ, ê·¸ë¦¬ê³  ì–´ë””ì„œ DataSourceë¥¼ ì°¸ì¡°í•˜ëŠ”ì§€ë¥¼ ëª°ëê¸° ë•Œë¬¸ì— ì´ í´ë˜ìŠ¤ì˜ ì—­í• ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤. Spring ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì„¤ëª…ì´ ìˆë‹¤.\n\n> InitializingBean#afterPropertiesSet()ì—ì„œ schema-\\*.sqlì„ ì‹¤í–‰í•˜ê³  DataSourceSchemaCreatedEventì—ì„œ data-\\*.sql ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ `DataSource ì´ˆê¸°í™”ë¥¼ ì²˜ë¦¬í•˜ëŠ” Bean`ì´ë‹¤.\n\nì„¤ëª…ì„ ì ì–´ë³´ë©´ `DataSourceInitializerInvoker`ëŠ” DataSourceì˜ ì´ˆê¸°í™”ë¥¼ ìœ„í•´ì„œ 2ê°€ì§€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ìŠ¤í‚¤ë§ˆ ìƒì„±ê³¼ ë¹ˆ ìƒì„± ì‹œì ì— ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  `DataSourceInitializerPostProcessor`ì— ì˜í•´ì„œ DataSource ìƒì„± í›„ì— ë§Œë“¤ì–´ì§„ë‹¤. ì—­í• ê³¼ ìƒì„± ì‹œì ì„ ì•Œê³  ë‚˜ë‹ˆ DataSourceë¥¼ ì°¸ì¡°í•  ë²•ë„ í•´ ë³´ì¸ë‹¤. ì¢€ ë” ëª…í™•í•œ ì´ìœ ë¥¼ ì•Œê¸°ìœ„í•´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê³³ì„ ë””ë²„ê¹…ì„ í•´ ë³´ì•˜ë‹¤.\n\n```java\npublic class DefaultSingletonBeanRegistry extends SimpleAliasRegistry implements SingletonBeanRegistry {\n\n    //ë‚˜ë¨¸ì§€ ì½”ë“œëŠ” ìƒëµ.\n    //ì´ ë©”ì†Œë“œ ì—ëŸ¬ ì—ëŸ¬ ë°œìƒ.\n    protected void beforeSingletonCreation(String beanName) {\n\t\tif (!this.inCreationCheckExclusions.contains(beanName) && !this.singletonsCurrentlyInCreation.add(beanName)) {\n\t\t\tthrow new BeanCurrentlyInCreationException(beanName);\n\t\t}\n\t}\n}\n```\n\nì—ëŸ¬ê°€ ë°œìƒí•œ ë©”ì†Œë“œëŠ” Singleton Beanìƒì„± ì „ì— í˜¸ì¶œë˜ëŠ” ì½œë°±ìœ¼ë¡œ, ì½”ë“œì—ì„œ ë³´ë“¯ì´ `singletonsCurrentlyInCreation`ë¼ëŠ” Setì— í˜„ì¬ ìƒì„±í•˜ë ¤ëŠ” Bean ì´ë¦„ì´ ìˆë‹¤ë©´ `BeanCurrentlyInCreationException`ì„ ë°œìƒì‹œí‚¨ë‹¤. `singletonsCurrentlyInCreation`ì—ëŠ” ì•„ë˜ì˜ ëª©ë¡ì„ í¬í•¨í•˜ê³  ìˆì—ˆê³  `communityDataSource`ê°€ ì´ë¯¸ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒì´ë‹¤.\n\n```text\n0 = \"writerCommunityDataSource\"\n1 = \"communityDataSource\" \n2 = \"entityManagerFactory\"\n3 = \"org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker\"\n4 = \"org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration\"\n```\nì—ëŸ¬ê°€ ë‚œ ê³³ìœ¼ë¡œë¶€í„° traceë¥¼ ë”°ë¼ê°€ ë³´ë‹ˆ `DataSourceInitializerInvoker`ê°€ êµ¬í˜„í•˜ê³  ìˆëŠ” `InitializingBean`ì¸í„°í˜ì´ìŠ¤ì˜ `afterPropertiesSet`ë©”ì†Œë“œì—ì„œ DataSourceë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. ê·¸ë¦¬ê³  @Primary ì–´ë…¸í…Œì´ì…˜ì—ì˜í•´ `communityDataSource`ê°€ ì„ íƒë˜ë©´ì„œ ìˆœí™˜ ì°¸ì¡° ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ Actuatorê°€ ìˆì„ ë•ŒëŠ” ì™œ ë°œìƒí•˜ì§€ ì•Šì•˜ì„ê¹Œ? \n\n```text\n0 = \"writerCommunityDataSource\"\n1 = \"healthContributorRegistry\"\n2 = \"servletEndpointRegistrar\"\n3 = \"dbHealthContributor\"\n4 = \"org.springframework.boot.autoconfigure.jdbc.DataSourceInitializerInvoker\"\n5 = \"org.springframework.boot.actuate.autoconfigure.jdbc.DataSourceHealthContributorAutoConfiguration\"\n6 = \"healthEndpoint\"\n```\nActuatorê°€ í¬í•¨ë˜ì—ˆì„ ë•Œ `singletonsCurrentlyInCreation`ì—ëŠ” ìœ„ì™€ ê°™ì€ í•­ëª©ë“¤ì´ ìˆì—ˆë‹¤. ì´ ëª©ë¡ì—ì„œëŠ” `communityDataSource`ê°€ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤. ì´ ì‚¬ì‹¤ë¡œ `writerCommunityDataSource`ê°€ `communityDataSource`ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì–´ë–¤ ê²ƒì— ì˜í•´ ìƒì„±ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ëª¨ë“ˆ í¬í•¨ ì—¬ë¶€ì— ë”°ë¥¸ DataSource ìƒì„± í”Œë¡œìš°ëŠ” ì•„ë˜ì™€ ê°™ì´ ì§„í–‰ëœë‹¤.\n\n```text\n//Actuatorê°€ ì—†ì„ ë•Œ\n1. communityDataSource\n2. writerCommunityDataSource\n3. DataSourceInitializerInvoker\n4. communityDataSource\n\n//Actuatorê°€ ìˆì„ ë•Œ\n1. ???\n2. writerCommunityDataSource\n3. DataSourceInitializerInvoker\n4. communityDataSource\n5. writerCommunityDataSource\n```\n\nActuatorê°€ ìˆì„ ë•Œ 5ë²ˆì§¸ ê³¼ì •ì—ì„œëŠ” ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ì™œ ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ ëª¨í˜¸í•˜ê²Œ ëŠê»´ì¡Œì—ˆëŠ”ë° ë””ë²„ê¹…ì„ í•´ë³´ë‹ˆ `DataSourceInitializerInvoker`ëŠ” Bean ìƒì„± í›„ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œì´ê¸° ë•Œë¬¸ì— `communityDataSource`ì—ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì°¾ì„ ë•Œ ì •ìƒì ìœ¼ë¡œ ì°¾ëŠ”ë‹¤. ìƒì„±í•˜ê³  ìˆëŠ” Beanì„ ë‹¤ì‹œ ì°¸ì¡°í•˜ê²Œ ë  ë•Œë§Œ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. \nê·¸ë ‡ë‹¤ë©´ Actuatorê°€ í¬í•¨ë˜ì—ˆì„ ë•ŒëŠ” Configurationì—ì„œ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì‹œì ë³´ë‹¤ ë” ë¹¨ë¦¬ ë§Œë“¤ì–´ì ¸ì•¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì„ í…ë° DataSource Beanì„ ìƒì„±í•˜ëŠ” ì‹œì ì´ ì–´ë–»ê²Œ ë‹¤ë¥¸ ê±¸ê¹Œ?\n\n```java\npublic abstract class AbstractApplicationContext extends DefaultResourceLoader implements ConfigurableApplicationContext {\n    //ë‚˜ë¨¸ì§€ëŠ” ìƒëµ\n    @Override\n\tpublic void refresh() throws BeansException, IllegalStateException {\n        synchronized (this.startupShutdownMonitor) {\n\t\t\ttry {\n\t\t\t\tpostProcessBeanFactory(beanFactory);\n\t\t\t\tinvokeBeanFactoryPostProcessors(beanFactory);\n\t\t\t\tregisterBeanPostProcessors(beanFactory);\n\t\t\t\tinitMessageSource();\n\t\t\t\tinitApplicationEventMulticaster();\n                onRefresh(); //Actuatorê°€ ìˆì„ ë•Œ ìƒì„±ë˜ëŠ” ì‹œì .\n\t\t\t\tregisterListeners();\n                finishBeanFactoryInitialization(beanFactory); //Actuatorê°€ ì—†ì„ ë•Œ ìƒì„±ë˜ëŠ” ì‹œì .\n\t\t\t\tfinishRefresh();\n\t\t\t}\n        }\n    }\n}\n```\n\n`AbstractApplicationContext`ì—ì„œ ë¹ˆì´ ìƒì„±ë˜ëŠ” ì‹œì ì´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆëŠ”ë° Actuatorê°€ í¬í•¨ë˜ì§€ ì•Šì•˜ì„ ë•ŒëŠ” `finishBeanFactoryInitialization`ë©”ì†Œë“œì—ì„œ `entityManagerFactory`ë¡œ DataSourceê°€ ìƒì„±ë˜ê³  Actuatorê°€ í¬í•¨ë  ë•ŒëŠ” ê·¸ë³´ë‹¤ ì•ì…˜ `onRefresh`ë©”ì†Œë“œì˜ `DataSourceHealthContributorAutoConfiguration`ì—ì„œ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤. \n\nê·¸ëŸ°ë°, í…ŒìŠ¤íŠ¸í•˜ë‹¤ ë³´ë‹ˆ ìŠ¤í”„ë§ ë¶€íŠ¸ ë²„ì „ì„ ë³€ê²½í•˜ë‹ˆ Actuatorê°€ í¬í•¨ë˜ì–´ ìˆì–´ë„ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°œê²¬í–ˆë‹¤. ë””ë²„ê¹…í•´ë³´ë‹ˆ `DataSourceHealthContributorAutoConfiguration`ëŠ” DataSourceë¥¼ ìƒì„±í•  ë•Œ `DefaultListableBeanFactory`ì— ì •ì˜ëœ `beanDefinitionNames`ì—ì„œ DataSource íƒ€ì…ì„ ì°¾ëŠ”ë° ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ë²„ì „ì—ì„œëŠ” `communityDataSource`ê°€ ë¨¼ì € ìƒì„±ë˜ì–´ ì•„ë˜ì™€ ê°™ì´ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤.\n\n```text\n1. ???\n2. communityDataSource\n3. writerCommunityDataSource\n3. DataSourceInitializerInvoker\n4. communityDataSource\n```\n\në²„ì „ì— ë”°ë¼ ìƒì„± ìˆœì„œê°€ ë°”ë€ŒëŠ” ì´ìœ ë¥¼ Configurationí´ë˜ìŠ¤ì˜ Beanë©”ì†Œë“œì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì½ëŠ” `ConfigurationClassParser`í´ë˜ìŠ¤ì˜ `retrieveBeanMethodMetadata`ë©”ì†Œë“œì˜ ì£¼ì„ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì—ˆë‹¤.\n\n> ë¶ˆí–‰í•˜ê²Œë„, JVMì˜ í‘œì¤€ ë¦¬í”Œë ‰ì…˜ì€ ê°™ì€ JVM ì—ì„œ ë™ì¼í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ì‹¤í–‰ ê°„ì—ë„ ì„ì˜ì˜ ìˆœì„œë¡œ ë©”ì„œë“œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. \n\nì´ ë‚´ìš©ì— ë”°ë¼ Configurationí´ë˜ìŠ¤ì—ì„œ Beanì´ ì„ ì–¸ëœ ìˆœì„œë¥¼ ë°”ê¾¸ë©´ ì—ëŸ¬ê°€ ë‚˜ë˜ ë²„ì „ì—ì„œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šë˜ ë²„ì „ì—ì„œëŠ” ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆë‹¤.\n\n### ê²°ë¡ \nì§€ê¸ˆê¹Œì§€ ì¡°ì‚¬í•´ë³¸ ë‚´ìš©ì„ ìš”ì•½í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n- DataSourceì— ì˜ì¡´ ê´€ê³„ê°€ ìˆì„ ë•Œ `DataSourceInitializerInvoker`ì—ì„œ ì„ íƒë˜ëŠ” DataSourceì— ë”°ë¼ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒ í•  ìˆ˜ ìˆë‹¤. \n- Actuatorê°€ í¬í•¨ë˜ì—ˆì„ ë•Œ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•Šë˜ ì´ìœ ëŠ” `DataSourceHealthContributorAutoConfiguration`ì—ì„œ DataSourceë¥¼ ìƒì„±í•´ì„œ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.\n- í•˜ì§€ë§Œ, ìƒì„±í•˜ëŠ” ìˆœì„œì— ë”°ë¼ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©° JVMì—ì„œ ìˆœì„œëŠ” ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. \n\në‚˜ì˜ ê²½ìš°ì—ëŠ” ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì„œë‘ì— ì–¸ê¸‰í–ˆë“¯ì´ DataSourceì˜ ì˜ì¡´ê´€ê³„ë¥¼ ì—†ì• ê³  DataSourceë¥¼ 1ê°œë§Œ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í–ˆë‹¤. DataSourceë¥¼ ìƒì„±í•˜ê³  ì°¸ì¡°í–ˆë˜ ì´ìœ ê°€ @ConfigurationPropertiesê°€ ì„¤ì •ëœ í•„ë“œëŠ” ë³€ê²½í•˜ì§€ ì•Šê³  Beanì„ ìƒì„±í•´ì£¼ê¸° ë•Œë¬¸ì´ì—ˆëŠ”ë° DataSourceë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  HikariConfigë§Œì„ ìƒì„±í•´ ê¸°ì¡´ì— í•˜ê³ ì í–ˆë˜ ê²ƒì€ ìœ ì§€í•˜ë„ë¡ í–ˆë‹¤. ì´ì œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì„ ì•Œì•˜ìœ¼ë‹ˆ ë‹¤ë¥¸ ë°©ë²•ë„ ì¶©ë¶„íˆ ì‚¬ìš©í•  ë“¯í•œë° `DataSourceInitializerInvoker`ë„\nì—¬ëŸ¬ ê°œ ì •ì˜ë˜ì–´ DataSourceë¥¼ ì°¾ì•„ì˜¬ ìˆ˜ ìˆë‹¤ë©´ ìˆœí™˜ ì°¸ì¡° ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. \në¬¼ë¡  í•´ë³´ì§€ëŠ” ì•Šì•˜ë‹¤.\n\n","excerpt":"ë°œë‹¨ ë‚´ê°€ ë§Œë“  í”„ë¡œì íŠ¸ ì¤‘ì—ëŠ” ì—ì„œëŠ” 2ê°œ ì´ìƒì˜ DataSourceë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒì´ ìˆë‹¤. ì˜ Reader, Writer ì—”ë“œí¬ì¸íŠ¸ì— ì—°ê²°ë˜ëŠ” DataSourceâ€¦","fields":{"slug":"/spring-multiple-datasource-cycle-error-analysis/"},"frontmatter":{"date":"Sep 30, 2020","title":"ì˜ì¡´ì„±ì„ ê°€ì§„ ë‹¤ì¤‘ DataSourceì˜ ìˆœí™˜ ì°¸ì¡° ì˜¤ë¥˜ ë¶„ì„","tags":["DataSource","DataSourceInitializerInvoker","dependencyCycleError"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\ní˜„ì¬ í”Œë«í¼ì„ ê°œë°œí•˜ê³  ìš´ì˜í•˜ë©´ì„œ ëª‡ ì°¨ë¡€ì˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë¬¸ì œë¥¼ ê²ªì—ˆëŠ”ë° ì´ê²ƒë“¤ì„ í•´ê²°í–ˆë˜ ê³¼ì •ê³¼ ê·¸ ì›ì¸ì„ ì ì–´ë³´ë ¤ê³  í•œë‹¤. ë°œìƒí•œ ì§€ ëª‡ ê°œì›”ì´ ì§€ë‚œ ê²ƒë“¤ì´ì§€ë§Œ í˜¹ì‹œ ë‚˜ì™€ ê°™ì€ ë¬¸ì œë¥¼ ê²ªëŠ” ì‚¬ëŒì´ ìˆë‹¤ë©´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.\n\n### ë¬¸ì œ ë°œìƒ\nê°€ì¥ ì²˜ìŒìœ¼ë¡œ ë°œìƒí–ˆë˜ ë©”ëª¨ë¦¬ ê´€ë ¨ ë¬¸ì œëŠ” ì„œë¹„ìŠ¤ë¥¼ ì˜¤í”ˆí•˜ê³  ë§ì€ ë‚ ì´ ì§€ë‚˜ì§€ ì•Šì•˜ì„ ë•Œì˜€ë˜ ê±¸ë¡œ ê¸°ì–µí•œë‹¤. ì£¼ë§ì—ë„ ë§ˆìŒ í¸í•˜ê²Œ ì‰¬ì§€ë¥¼ ëª»í•˜ëŠ” ë•Œì˜€ìœ¼ë‹ˆê¹Œ...\nì•„ë‹ˆë‚˜ ë‹¤ë¥¼ê¹Œ ì •í™•í•œ ì„ í›„ ê´€ê³„ëŠ” ê¸°ì–µì´ ë‚˜ì§€ ì•Šì§€ë§Œ, ì„œë¹„ìŠ¤ê°€ ëŠë ¤ì§„ ê²ƒì„ ì¸ì§€í•˜ê³  ê° ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í–ˆì—ˆë‹¤.\n\n![ì•„ë‹ˆ... ì„œë²„ CPUì˜ ìƒíƒœê°€?](../src/images/community-cpu-log-by-memory-leak.png)\n\nì´ ê·¸ë˜í”„ì—ì„œ ë³´ë‹¤ì‹œí”¼ íŠ¹ì • ì¸ìŠ¤í„´ìŠ¤ ëª‡ ëŒ€ê°€ ë¬´ìŠ¨ ì§“ì„ í•˜ëŠ”ì§€ ê°‘ìê¸° CPU Utilizationì´ ì¹˜ì†ŸëŠ” í˜„ìƒì´ ìˆì—ˆê³  ì´ ì„œë¹„ìŠ¤ë¡œ HTTP Callì„ í•˜ëŠ” ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ë„ ì˜í–¥ì„ ë¯¸ì¹˜ê³  ìˆì—ˆë‹¤. ì•”ë‹´í•œ ì‹¬ì •ê³¼ ë”ë¶ˆì–´ ë„ë¬´ì§€ ì›ì¸ì„ ì•Œ ìˆ˜ê°€ ì—†ì—ˆëŠ”ë° ê°‘ìê¸° CPUê°€ ì¹˜ì†ŸëŠ” í˜„ìƒì„ ê²½í—˜í•œ ì ì´ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ë¬¸ì œê°€ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ì¬ì‹œì‘í•˜ì˜€ê³  ì„œë¹„ìŠ¤ ìƒíƒœëŠ” ì ì í•´ì§„ ë“¯í–ˆë‹¤. ë¬¸ì œê°€ ì–¸ì œ ë‹¤ì‹œ ë°œìƒí• ì§€ ëª°ë¼ ì¡°ë§ˆì¡°ë§ˆí•˜ê¸´ í–ˆì§€ë§Œ.\n\n### ì›ì¸ íŒŒì•…\nê³„ì† ëª¨ë‹ˆí„°ë§í•˜ë‹¤ ë³´ë‹ˆ ì‹œê°„ì´ ì§€ë‚˜ë©´ ë¬¸ì œì˜ í˜„ìƒì´ ì¬í˜„ë˜ì—ˆê³  LBì—ì„œ ì œì™¸í•˜ì—¬ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë¬¸ì œë¥¼ íŒŒì•…í•´ ë³´ê¸°ë¡œ í–ˆë‹¤. `top` ëª…ë ¹ìœ¼ë¡œ ë³´ì•˜ì„ ë•Œ javaê°€ CPUë¥¼ ê°€ì¥ ë§ì´ ì ìœ í•˜ê³  ìˆëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆê³  `top -H -p pid`ë¡œ javaì˜ íŠ¹ì • threadê°€ CPUë¥¼ ë§ì´ ì‚¬ìš©í•¨ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. \n\nê·¸ë¦¬ê³  `sudo -u user jstack -l pid` ëª…ë ¹ìœ¼ë¡œ jvmì˜ thread dumpì˜ tidì™€ ëŒ€ì¡°í•œ ê²°ê³¼ ê·¸ threadê°€ GC threadë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. ì¦‰, ì´ìœ ëŠ” ëª¨ë¥´ê² ëŠ”ë° GCë¥¼ ìˆ˜í–‰í•˜ëŠë¼ CPUë¥¼ ë§ì´ ì“°ê³  ìˆê³  GCê°€ ìˆ˜í–‰ë˜ì–´ë„ ë©”ëª¨ë¦¬ í•´ì œê°€ ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í˜„ì¬ ìƒíƒœì— ë„ë‹¬í–ˆì„ ê²ƒì´ë‹¤. ì´ë•Œë¶€í„° ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì˜ì‹¬ë˜ê¸° ì‹œì‘í–ˆë‹¤. (ê·¸ë•Œ `jstat`ì„ ì‚¬ìš©í–ˆë‹¤ë©´ ì¢€ ë” ì˜ë¯¸ ìˆëŠ” ìƒíƒœ ë¶„ì„ì„ í–ˆì„ ê²ƒ ê°™ë‹¤.) \n\n### ë©”ëª¨ë¦¬ ë¶„ì„\në©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì˜ì‹¬ë˜ëŠ” ìƒí™©ì´ê¸°ëŠ” í–ˆì§€ë§Œ ì—­ì‹œë‚˜ ì›ì¸ì´ ì§ì‘ë„ ë˜ì§€ ì•Šì•˜ë‹¤. íŠ¹ë³„íˆ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ìš”êµ¬í•˜ëŠ” ì½”ë“œë„ ì—†ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ë©”ëª¨ë¦¬ ë¶„ì„ì„ ìœ„í•´ jvmì˜ heap dumpë¥¼ ë°›ì•„ë³´ê¸°ë¡œ í–ˆë‹¤. `sudo -u user jmap -dump:format=b,file=dump.bin pid` ëª…ë ¹ì„ ì‚¬ìš©í–ˆë‹¤. \n\ndumpëŠ” ì‹œê°„ì´ ê½¤ ê±¸ë ¸ëŠ”ë° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ë‹¤ë¥´ê² ì§€ë§Œ.. ê¸°ì–µí•˜ê¸°ë¡œëŠ” 2Gì¼ ë•Œ 2ì‹œê°„ ì •ë„ ê±¸ë ¸ë˜ ë“¯í•˜ë‹¤. ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ì‘ì—…ì„ ê±¸ì–´ë†“ê³  ë‹¤ë¥¸ ê²ƒì„ í•˜ë‹¤ê°€ ë‚˜ì¤‘ì— í™•ì¸í–ˆì„ ë•Œ í„°ë¯¸ë„ì´ ëŠì–´ì ¸ ìˆëŠ” ë¶ˆìƒì‚¬ë¥¼ ë§ì´í•˜ê³  nohupìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰í•œ ê¸°ì–µì´ ìˆë‹¤. ê·¸ë¦¬ê³  AWS EC2ì—ì„œëŠ” packageë¥¼ ì„¤ì¹˜í•´ì•¼ jmap ì‹¤í–‰ì´ ê°€ëŠ¥í–ˆë‹¤[^1].\n\në¤í”„ íŒŒì¼ ë¶„ì„ì—ëŠ” eclipseì˜ [MAT(Memory Analyzer)](https://www.eclipse.org/mat)ë¥¼ ì‚¬ìš©í–ˆë‹¤.\n\n[^1]: https://stackoverflow.com/questions/43753568/aws-ec2-jmap-heap-dump\n\n![](../src/images/community-memory-dump.png)\n![](../src/images/community-memory-dump-detail.png)\n\në¶„ì„í•´ë³´ë‹ˆ `PartTreeJpaQuery`ë¼ëŠ” í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” `ConcurrentHashMap`ì´ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì°¨ì§€í•˜ê³  ìˆì—ˆë‹¤.  ê´€ë ¨ëœ ë‚´ìš©ì´ ìˆëŠ”ì§€ ê²€ìƒ‰í•´ ë³´ì•˜ê³  ë‚˜ì˜ ì¦ìƒê³¼ ë¹„ìŠ·í•´ ë³´ì´ëŠ” Spring Data JPA [ì´ìŠˆ](https://jira.spring.io/browse/DATAJPA-1647)ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆì—ˆë‹¤.\n\n### DATAJPA-1647\nì´ ì´ìŠˆì—ì„œëŠ” JPA repositoryì˜ `findBy...`ì˜ íŒŒë¼ë¯¸í„°ë¡œ `Pageable`ì„ ì‚¬ìš©í•  ë•Œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ìˆëŠ” ê²ƒ ê°™ë‹¤ê³  ì œë³´í•˜ê³  ìˆì—ˆë‹¤. ê·¸ë¦¬ê³  ì´ ì´ìŠˆëŠ” ì¥ì• ê°€ ë°œìƒí•œ ë‚ ì˜ ë¶ˆê³¼ 4ì¼ ì „ì— ë²„ì „ ì˜¬ë¦¼ ë˜ë©´ì„œ ìˆ˜ì •ë˜ì—ˆë‹¤. [PR](https://github.com/spring-projects/spring-data-jpa/pull/402)ì„ ë³´ë©´ ì´ì „ì— ë„£ì€ ê¸°ëŠ¥ì„ ë¡¤ë°±í•˜ëŠ” ê²ƒì¸ë° [DATAJPA-1575](https://jira.spring.io/browse/DATAJPA-1575)ìœ¼ë¡œ 2019ë…„ 8ì›” 5ì¼ 2.2.0.RC2 ë²„ì „ì— í¬í•¨ë˜ì—ˆë‹¤. \n\nì •ë¦¬í•˜ë©´ 2019ë…„ 8ì›” 5ì¼ì— Spring Data JPAì˜ 2.2.0.RC2ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì„ 2020ë…„ 1ì›” 15ì¼ì— 2.2.4ì™€ 2.3.0 ë²„ì „ ì´ìƒì—ì„œëŠ” ì´ì „ ì½”ë“œë¡œ ë˜ëŒë ¤ í•´ê²°í•˜ì˜€ë‹¤. ë¬¸ì œê°€ ìˆì—ˆë˜ í”„ë¡œì íŠ¸ëŠ” Spring Boot 2.2.0ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆê³  ëŒ“ê¸€ì„ ì¡°íšŒí•˜ê³  í˜ì´ì§•í•˜ê¸° ìœ„í•´ `JpaRepository`ë¥¼ ìƒì†í•œ ì¸í„°í˜ì´ìŠ¤ì—ì„œ `findBy...`ì— `Pageable`ì„ íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.\n\n\n### ê²€ì¦\nê°™ì€ ì½”ë“œì—ì„œ Spring Data JPA ë²„ì „ë§Œì„ ë³€ê²½í•˜ì—¬ heap ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ë¹„êµí•´ ë³´ê¸°ë¡œ í–ˆë‹¤.\ní™˜ê²½ì€ Java 1.8ì„ ì‚¬ìš©í•˜ì˜€ê³ , Heapì˜ ìµœì´ˆ, ìµœëŒ€ í¬ê¸°ëŠ” 1Gë¡œ ì„¤ì •í–ˆë‹¤. ê·¸ë¦¬ê³  nGinrderë¡œ 100ëª…ì˜ ê°€ìƒ ìœ ì €ë¡œ ìš”ì²­ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ì˜€ìœ¼ë©° Scouterë¡œ ëª¨ë‹ˆí„°ë§í•˜ì˜€ë‹¤. ê° ìš”ì²­ì€ ì•„ë˜ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í•˜ê²Œ í–ˆë‹¤.\n```java\n    @GetMapping(\"/memoryLeakTest\")\n    public void memoryLeakTest() {\n        commentRepository.findByComment(\"comment\", PageRequest.of(1, 1));\n    }\n```\n\n#### Spring Data JPA 2.2.0\n![JPA 2.2.0 Heap](../src/images/memory-leak-jpa-2.2.0-heap.png )\n![JPA 2.2.0 TPS](../src/images/memory-leak-jpa-2.2.0-tps.png )\n\nì‹œì‘ í›„ 30ë¶„ê°€ëŸ‰ í›„ì— í™ ì‚¬ì´ì¦ˆê°€ ìµœëŒ€ì¹˜ì¸ 1Gì— ë„ë‹¬í•˜ì˜€ê³  GCë¡œë„ ë©”ëª¨ë¦¬ê°€ íšŒìˆ˜ë˜ì§€ ì•Šì•„ ì ì°¨ ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ê°€ ì¤„ì–´ë“œëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì—ˆë‹¤. ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ëª¨ë¦¬ê°€ ì¤„ì–´ë“¤ë©´ì„œ TPSë„ ê¸‰ê°í•˜ì˜€ë‹¤. (ë‚ ì§œê°€ ë³€ê²½ë˜ì–´ì„œ ê·¸ëŸ°ì§€ Scouterì—ì„œ Heap ë©”ëª¨ë¦¬ ë¡œê·¸ê°€ ì „ë¶€ ë³´ì´ì§€ ì•ŠëŠ”ë° 100Më¶€í„° ì ì°¨ ì‚¬ìš©ëŸ‰ì´ ì¦ê°€í•˜ì˜€ë‹¤.)\n\n#### Spring Data JPA 2.2.4\n![JPA 2.2.4 Heap](../src/images/memory-leak-jpa-2.2.4-heap.png )\n![JPA 2.2.4 TPS](../src/images/memory-leak-jpa-2.2.4-tps.png )\n\n2ì‹œê°„ ì •ë„ ìˆ˜í–‰í•˜ì˜€ëŠ”ë°ë„ 600M ì•„ë˜ë¡œ ì‚¬ìš©í•˜ê³  ìˆê³  TPS ì €í•˜ í˜„ìƒë„ ë³´ì´ì§€ ì•Šì•˜ë‹¤. \n\n### ë¬´ì—‡ì„ í•˜ë ¤ê³  í–ˆë˜ ê±¸ê¹Œ?\nìœ„ì˜ PRì—ì„œ ë³´ë‹¤ ì‹œí”¼ ì´ì „ ì½”ë“œëŠ” `ParameterBinder`ë¥¼ ìƒì„±í•˜ê³  Mapì— ì €ì¥í•˜ì—¬ ì¬ì‚¬ìš©í•˜ë ¤ê³  í–ˆê³  ë³€ê²½ëœ ì½”ë“œëŠ” `ParameterBinder`ë¥¼ ìƒì„±í•œ ë’¤ì— ë³„ë‹¤ë¥¸ ì‘ì—… ì—†ì´ ë°”ë¡œ ë°˜í™˜í•´ì£¼ê³  ìˆë‹¤. ì´ì „ ì½”ë“œì—ì„œëŠ” ìƒì„± ë¹„ìš©ì„ ì¤„ì´ë ¤ê³  Mapì— ì €ì¥í•œ ë’¤ì— ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì˜ë„í–ˆì§€ë§Œ í‚¤ë¡œ ì‚¬ìš©í•œ `ParameterMetadata`ê°ì²´ì˜ ë™ì¼ì„±ì„ ë³´ì¥í•´ì£¼ì§€ ëª»í•´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ì‹¤ì œë¡œ debuggerë¡œ í™•ì¸í–ˆì„ ë•Œ ë™ì¼í•œ ì¸ìˆ˜ì„ì—ë„ Mapì˜ í¬ê¸°ê°€ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ëŠ˜ì–´ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.\n\n","excerpt":"â€¦","fields":{"slug":"/memory-leak-the-first/"},"frontmatter":{"date":"Jun 29, 2020","title":"ë‚´ê°€ ê²ªì€ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì´ì•¼ê¸° - ì²« ë²ˆì§¸","tags":["memoryLeak","springDataJpa"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\në‚´ê°€ ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ê°œë°œí•œ ê²ƒ ì¤‘ì—ëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ì•Œë¦¼ê³¼ ì‘í’ˆ, ì‹œìŠ¤í…œì— ëŒ€í•œ ì•Œë¦¼ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” `Notification API`ê°€ ìˆê³  ëŒ“ê¸€ê³¼ ì‘í’ˆì˜ Rating, Likeë¥¼ ê´€ë¦¬í•˜ëŠ” `Community API`ê°€ ìˆë‹¤. ê·¸ëŸ°ë° ì´ ë‘ ì„œë¹„ìŠ¤ì—ì„œ ë¹ˆë„ëŠ” ë‚®ì§€ë§Œ, ê°„í˜¹ `CannotAcquireLockException`ì´ ë°œìƒí•˜ì—¬ ì›ì¸ì„ ì°¾ì•„ë³´ë ¤ê³  í–ˆë˜ ê³¼ì •ê³¼ ì‚¬ë¡€ë¥¼ ì ì–´ë³¸ë‹¤. \n\n### CannotAcquireLockException\n[ë¬¸ì„œ](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html)ì—ëŠ” ì´ë¦„ê³¼ ê°™ì´ lockì„ ì–»ì§€ ëª»í•´ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ì´ë‹¤. ë˜í•œ stack traceì˜ ë©”ì‹œì§€ì™€[^1] ê²€ìƒ‰í•œ ê²°ê³¼ë¡œ ë³´ê±´ëŒ€ `Notification API`ì—ì„œëŠ” ì•Œë¦¼ì„ ì½ì€ ì‹œê°„ì„ ê¸°ë¡í•˜ëŠ” `Confirm API`ì™€ ëŒ“ê¸€ì„ Like í•˜ëŠ” `Comment Like API`ì—ì„œ ë°œìƒí–ˆê³  `deadlock`ê³¼ ê´€ë ¨ë˜ì–´ ë³´ì˜€ë‹¤.\n\n[^1]: Deadlock found when trying to get lock; try restarting transaction\n\n### Deadlock\nDBëŠ” íŠ¸ëœì­ì…˜ì„ ì•ˆì „í•˜ê²Œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ lockì„ ì‚¬ìš©í•œë‹¤. ê·¸ëŸ°ë° íŠ¸ëœì­ì…˜ë“¤ì´ ì„œë¡œ í•„ìš”í•œ lockì„ ê°€ì§€ê³  ìˆì–´ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” ìƒíƒœê°€ ë˜ëŠ” ê²ƒì´ deadlockì´ë‹¤. MySQL ë¬¸ì„œì— ìˆëŠ” [ì˜ˆì œ](https://dev.mysql.com/doc/refman/8.0/en/innodb-deadlock-example.html)ë¥¼ ë³´ë©´ ì–´ë–»ê²Œ deadlockì´ ë°œìƒí•˜ëŠ”ì§€ ë³´ì—¬ì¤€ë‹¤.  \n\n> í´ë¼ì´ì–¸íŠ¸ Aì—ì„œ share modeë¡œ selectí•˜ì—¬ lockë¥¼ ì–»ëŠ”ë‹¤. share modeëŠ” íŠ¸ëœì­ì…˜ì´ ëë‚  ë•Œê¹Œì§€ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.\n```sql\nmysql> CREATE TABLE t (i INT) ENGINE = InnoDB;\nQuery OK, 0 rows affected (1.07 sec)\n\nmysql> INSERT INTO t (i) VALUES(1);\nQuery OK, 1 row affected (0.09 sec)\n\nmysql> START TRANSACTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> SELECT * FROM t WHERE i = 1 FOR SHARE;\n+------+\n| i    |\n+------+\n|    1 |\n+------+\n\n```\n> ê·¸ë¦¬ê³ , í´ë¼ì´ì–¸íŠ¸ Bì—ì„œ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  rowë¥¼ ì‚­ì œí•œë‹¤.\n  \n```sql\nmysql> START TRANSACTION;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> DELETE FROM t WHERE i = 1;\n```\n\n> ì‚­ì œ ì‘ì—…ì€ *x* lockì„[^2] í•„ìš”ë¡œ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  *s* lockì´ ìˆëŠ” ë™ì•ˆì€ x lockì„ íšë“¤ í•  ìˆ˜ ì—†ë‹¤. Aê°€ *s* lockì„ ê°€ì§€ê³  ìˆê³  Bì˜ ìš”ì²­ì€ queueë¡œ ì „ë‹¬ëœë‹¤.\n> ëìœ¼ë¡œ, Aê°€ rowë¥¼ ì‚­ì œí•˜ë ¤ê³  í•œë‹¤.\n\n[^2]: https://jeong-pro.tistory.com/94\n\n```sql\nmysql> DELETE FROM t WHERE i = 1;\nERROR 1213 (40001): Deadlock found when trying to get lock;\ntry restarting transaction\n```\n> deadlockì€ ì´ë•Œ ë°œìƒí•œë‹¤. AëŠ” ì‚­ì œ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ *x* lockì´ í•„ìš”í•˜ì§€ë§Œ, Bê°€ *x* lockì— ëŒ€í•œ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê³  ìˆê³  Aê°€ lockì„ í•´ì œí•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. ê²°ê³¼ì ìœ¼ë¡œ InnoDBëŠ” í´ë¼ì´ì–¸íŠ¸ ì¤‘ í•˜ë‚˜ì˜ lockì„ í•´ì œí•˜ê³  ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.\n\n### Confirm API\n`Confirm API`ëŠ” ì•Œë¦¼ì„ ì½ì€ ì‹œê°„ì„ ê¸°ë¡í•˜ëŠ” APIì´ë‹¤. 30ì¼ ì´ë‚´ì˜ ìµœëŒ€ 50 ê±´ì˜ ì•Œë¦¼ì„ ê°€ì ¸ì™€ì„œ ì½ì§€ ì•Šì€ ì•Œë¦¼ë§Œ í˜„ì¬ ì‹œê°ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ë¡œì§ì´ë‹¤. (`SimpleJpaRepository`ì˜ `saveAll()`ì„ ì‚¬ìš©í•œë‹¤.)ê²°êµ­, SELECTì™€ UPDATEí•˜ëŠ” ë¡œì§ì¸ë° UPDATE í•  ë•ŒëŠ” *x* lockì´ í•„ìš”í•˜ê² ì§€ë§Œ ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ SELECTí•  ë•Œ share modeë¥¼ ì“°ê±°ë‚˜ í•˜ì§€ ì•Šì•„ *s* lockì´ í•„ìš”í•˜ì§€ ì•Šë‹¤. ê·¸ë ‡ë‹¤ë©´ ì™œ ë°œìƒí•œ ê±¸ê¹Œ?\n\n`SHOW ENGINE INNODB STATUS` ëª…ë ¹ì–´ì˜ `LATEST DETECTED DEADLOCK` í•­ëª©ì— ì•„ë˜ì˜ ë‚´ìš©ì´ ìˆì—ˆë‹¤.\n\n```text\n------------------------\nLATEST DETECTED DEADLOCK\n------------------------\n2020-05-30 08:47:32 2b246ec44700\n*** (1) TRANSACTION:\nTRANSACTION 828466999, ACTIVE 0 sec starting index read\nmysql tables in use 1, locked 1\nLOCK WAIT 3 lock struct(s), heap size 376, 2 row lock(s), undo log entries 1\nMySQL thread id 18147477, OS thread handle 0x2b1effe82700, query id 1061155561\nupdate notification set contents='Kelas Rahasia Sang Permaisuri \\\"gukguk item tsundere sedang guguk putih masochist ğŸ¤­ğŸ¤£\n\\\"', created='2020-05-30 08:44:15', icon_uri='icon/notification/x2/comment.jpg.webp', landing_uri='idn.kakaopage://comment/3311/151580/791309', push_id='LIKE_COMMENT-791309-1590828254', title='\\'athyy dan 58orang lainya\\' telah menyukai komentar kamu.', type_code='LIKE_COMMENT', user_id='idnub265f96b23bb86', viewed='2020-05-30 08:47:32.551' where id=199064878\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 13 page no 6567228 n bits 48 index `PRIMARY` of table `page-notification`.`notification` trx id 828466999 lock_mode X locks rec but not gap waiting\nRecord lock, heap no 48 PHYSICAL RECORD: n_fields 12; compact format; info bits 0\n\n*** (2) TRANSACTION:\nTRANSACTION 828466998, ACTIVE 0 sec starting index read\nmysql tables in use 1, locked 1\nLOCK WAIT 3 lock struct(s), heap size 376, 2 row lock(s), undo log entries 1\nMySQL thread id 18147633, OS thread handle 0x2b1eff2c5700, query id 1061155560\nupdate notification set contents='Adonis \"masih gagal pahamğŸ˜ğŸ˜¶ğŸ˜¶\"', created='2020-05-30 08:25:53.0', icon_uri='icon/notification/x2/comment.jpg.webp', landing_uri='idn.kakaopage://comment/2267/24187/1213101', push_id='REPLY_TO_COMMENT-1213101-1590827152', title='byun baekhyun meninggalkan jawaban di komentarmu.', type_code='REPLY_TO_COMMENT', user_id='idnub265f96b23bb86', viewed='2020-05-30 08:47:32.551' where id=199063150\n*** (2) HOLDS THE LOCK(S):\nRECORD LOCKS space id 13 page no 6567228 n bits 48 index `PRIMARY` of table `page-notification`.`notification` trx id 828466998 lock_mode X locks rec but not gap\nRecord lock, heap no 48 PHYSICAL RECORD: n_fields 12; compact format; info bits 0\n[bitmap0 of 16 bytes in hex: 00 00 00 00 00 00 01 00 00 00 00 00 00 00 00 00 ]\n\n*** (2) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 13 page no 6567189 n bits 52 index `PRIMARY` of table `page-notification`.`notification` trx id 828466998 lock_mode X locks rec but not gap waiting\nRecord lock, heap no 52 PHYSICAL RECORD: n_fields 12; compact format; info bits 0\n```\n\nì´ ë‚´ìš©ìœ¼ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ì‚¬ì‹¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n  - `TRANSACTION 1`ì€ idê°€ 199064878ì¸ rowë¥¼ UPDATE í•œë‹¤. \n  - `TRANSACTION 2`ëŠ” idê°€ 199063150ì¸ rowë¥¼ UPDATE í•œë‹¤. \n  - `TRANSACTION 1`ì€ UPDATEí•˜ëŠ” recordì— ëŒ€í•œ *x* lockì´ í•„ìš”í•˜ì—¬ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤.\n  - `TRANSACTION 2`ëŠ” UPDATEí•˜ëŠ” recordì— ëŒ€í•œ *x* lockì´ í•„ìš”í•˜ì—¬ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤.\n  - `TRANSACTION 2`ëŠ” `TRANSACTION 1`ì´ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” recordì˜ *x* lockì„ ê°€ì§€ê³  ìˆë‹¤.\n\n\nì´ ê³¼ì •ëŒ€ë¡œ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë©´ ì¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> í…Œì´ë¸”ì„ ìƒì„±.\n```sql\nCREATE TABLE `deadlock` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `val` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n```\n\n> ìœ„ì™€ ê°™ì´ ë°ì´í„°ë¥¼ ì…ë ¥.\n\n```sql\n +-------------+\n | id   | val  |\n +------+------+\n |    1 |    1 |\n +------+------+\n |    2 |    2 |\n +------+------+\n```\n\n> ì²« ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ idê°€ 1ì¸ recordì˜ *x* lock íšë“.\n```sql\n# Client A\nSTART TRANSACTION;\nUPDATE deadlock SET val = 101 where id = 1;\n```\n\n> ë‘ ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ idê°€ 2ì¸ recordì˜ *x* lock íšë“.\n> ê·¸ë¦¬ê³  idê°€ 1ì¸ recordì˜ *x* lockì„ ì–»ê¸° ìœ„í•´ ëŒ€ê¸°.\n```sql\n# Client B\nSTART TRANSACTION;\nUPDATE deadlock SET val = 101 where id = 2;\nUPDATE deadlock SET val = 101 where id = 1;\n```\n\n> ë‹¤ì‹œ ì²« ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ idê°€ 2ì¸ recordì˜ *x* lock íšë“ ì‹œë„.\n> ì—¬ê¸°ì„œ deadlockë°œìƒ.\n```sql\n# Client A\nUPDATE deadlock SET val = 101 where id = 2;\n```\n\nì¬í˜„ ë°©ë²•ì€ ì–´ë µì§€ ì•Šì€ë° ìœ„ì˜ ê³¼ì •ì²˜ëŸ¼ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ 2ê°œ ì´ìƒì˜ UPDATEëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ ë°œìƒí•œë‹¤. í•˜ì§€ë§Œ ë‚˜ëŠ” íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•œ ì ì´ ì—†ì—ˆëŠ”ë° deadlockì´ ë°œìƒí•œ ê²ƒì´ ì˜ì•„í–ˆë‹¤. ê·¸ëŸ¬ë‹¤ê°€ `saveAll()` ì½”ë“œë¥¼ í™•ì¸í•´ ë³´ì•˜ëŠ”ë° ì—¬ê¸°ì— íŠ¸ëœì­ì…˜ ì–´ë…¸í…Œì´ì…˜ì´ ì‚¬ìš©ë˜ê³  ìˆì—ˆë‹¤. \n\n```java\n@Transactional\n@Override\npublic <S extends T> List<S> saveAll(Iterable<S> entities) {\n   ...\n}\n```\n\nì´ì œëŠ” deadlockì´ ë°œìƒí–ˆì„ ë•Œì˜ ìƒí™©ì„ ì•Œ ê²ƒë„ ê°™ë‹¤. \n\n1. ì§¦ì€ ì‹œê°„ ì•ˆì— `Confirm API`ê°€ ë™ì‹œì— í˜¸ì¶œë˜ì–´\n2. ì½ì€ ì‹œê°„ì„ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ì•Œë¦¼ ëª©ë¡ì„ `saveAll()`ë¡œ ì—…ë°ì´íŠ¸í•  ë•Œ\n3. ê°™ì€ ì•Œë¦¼ëª©ë¡ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ì—¬ë„ ì—…ë°ì´íŠ¸ê°€ ìˆ˜í–‰ë˜ëŠ” ìˆœì„œëŠ” ë³´ì¥ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—\n4. ì„œë¡œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ lockì„ í•„ìš”ë¡œí•˜ëŠ” ìƒí™©ìœ¼ë¡œ deadlock ë°œìƒí•œ ê²ƒì´ë‹¤.\n\n\n### Comment Like API\n`Comment Like API`ëŠ” ëŒ“ê¸€ì˜ ì¢‹ì•„ìš” ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë¥¼ í˜¸ì¶œë˜ëŠ” APIì´ë‹¤. comment, comment\\_like 2ê°œì˜ í…Œì´ë¸”ì„ ì‚¬ìš©í•œë‹¤. comment_likeì—ëŠ” ì‚¬ìš©ìê°€ ëŒ“ê¸€ì— ì¢‹ì•„ìš” ì„¤ì • ë˜ëŠ” ì·¨ì†Œí•œ ìƒíƒœë¥¼ commentì—ëŠ” ëŒ“ê¸€ê³¼ ì¢‹ì•„ìš” ìˆ«ìë¥¼ í•„ë“œë¡œ ê°€ì§€ê³  ìˆë‹¤. ì•„ë˜ëŠ” 2ê°œì˜ í…Œì´ë¸”ì„ ê°„ëµí™”í•œ ìŠ¤í‚¤ë§ˆì´ë‹¤.\n\n```sql\nCREATE TABLE `comment` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `comment` varchar(500) NOT NULL DEFAULT '',\n  `like_count` int(11) unsigned NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\nCREATE TABLE `comment_like` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `comment_id` bigint(20) unsigned NOT NULL,\n  `is_like` tinyint(1) NOT NULL DEFAULT '1',\n  PRIMARY KEY (`id`),\n  CONSTRAINT `fk_commentLike_commentId` FOREIGN KEY (`comment_id`) REFERENCES `comment` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n```\n\nì´ê²ƒë„ `SHOW ENGINE INNODB STATUS`ë¡œ deadlock ì •ë³´ë¥¼ ì°¾ì•„ë³´ì•˜ë‹¤.\n\n```text\n------------------------\nLATEST DETECTED DEADLOCK\n------------------------\n2020-06-10 17:16:42 2b221d246700\n*** (1) TRANSACTION:\nTRANSACTION 1124624957, ACTIVE 0 sec starting index read\nmysql tables in use 1, locked 1\nLOCK WAIT 5 lock struct(s), heap size 376, 2 row lock(s), undo log entries 1\nMySQL thread id 5148115, OS thread handle 0x2b1c5c38a700, query id 1602285300 update comment set like_count=like_count+1, updated='2020-06-10 17:16:42.991' where id=1105292\n*** (1) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 8 page no 22700 n bits 36 index `PRIMARY` of table `page-community`.`comment` trx id 1124624957 lock_mode X locks rec but not gap waiting\nRecord lock, heap no 36 PHYSICAL RECORD: n_fields 15; compact format; info bits 0\n\n*** (2) TRANSACTION:\nTRANSACTION 1124624956, ACTIVE 0 sec starting index read\nmysql tables in use 1, locked 1\nLOCK WAIT 5 lock struct(s), heap size 376, 2 row lock(s), undo log entries 1\nMySQL thread id 5148104, OS thread handle 0x2b1cada44700, query id 1602285299 update comment set like_count=like_count+1, updated='2020-06-10 17:16:42.988' where id=1105292\n*** (2) HOLDS THE LOCK(S):\nRECORD LOCKS space id 8 page no 22700 n bits 36 index `PRIMARY` of table `page-community`.`comment` trx id 1124624956 lock mode S locks rec but not gap\nRecord lock, heap no 36 PHYSICAL RECORD: n_fields 15; compact format; info bits 0\n\n*** (2) WAITING FOR THIS LOCK TO BE GRANTED:\nRECORD LOCKS space id 8 page no 22700 n bits 36 index `PRIMARY` of table `page-community`.`comment` trx id 1124624956 lock_mode X locks rec but not gap waiting\nRecord lock, heap no 36 PHYSICAL RECORD: n_fields 15; compact format; info bits 0\n```\n\n`Confirm API`ì™€ ìœ ì‚¬í•˜ì§€ë§Œ ë‘ ê°œì˜ íŠ¸ëœì­ì…˜ì´ í•˜ë‚˜ì˜ rowë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , ë‘ ë²ˆì§¸ íŠ¸ëœì­ì…˜ì´ *x*ê°€ ì•„ë‹Œ *S* lockì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ëˆˆì— ëˆë‹¤. ì´ ë¡œì§ì—ì„œë„ ëª…ì‹œì ìœ¼ë¡œ lockì„ ì„ ì–¸í•œ ë¶€ë¶„ì´ ì—†ëŠ”ë° ì™œ deadlockì´ ë°œìƒí•œ ê²ƒì¼ê¹Œ?\n\n\nInnoDBì—ì„œ lockì„ ì„¤ì •í•˜ëŠ” ê²½ìš°ë¥¼ ë‚˜ì—´í•´ë†“ì€ [ë¬¸ì„œ](https://dev.mysql.com/doc/refman/5.6/en/innodb-locks-set.html)ì—ì„œ Foreign Key ì¡°ê±´ì—ì„œ *s* lockì„ ì„¤ì •í•œë‹¤ê³  ë‚˜ì™€ìˆë‹¤.\n\n> FOREIGN KEYê°€ í…Œì´ë¸”ì— ì •ì˜ë˜ì–´ ìˆë‹¤ë©´ ì œì•½ì¡°ê±´ì„ í™•ì¸í•´ì•¼ í•  ëª¨ë“  insert, update, deleteëŠ” ì œì•½ì¡°ê±´ì„ ì°¸ì¡°í•˜ê³  ìˆëŠ” recordì— shared lockì„ ì„¤ì •í•œë‹¤. \n> ë˜í•œ, InnoDBëŠ” ì œì•½ì¡°ê±´ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ì—ë„ lockì„ ì„¤ì •í•œë‹¤.\n\nì´ ë‚´ìš©ëŒ€ë¡œ ì¶”ë¡ í•´ë³´ë©´ ì•„ë˜ì˜ ê³¼ì •ìœ¼ë¡œ ì¬í˜„í•  ìˆ˜ ìˆë‹¤.\n\n```sql\nCREATE TABLE `deadlock_child` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,\n  `deadlock_id` bigint(20) unsigned NOT NULL,\n  `val` int(11) NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `fk_deadlock_id` (`deadlock_id`),\n  CONSTRAINT `fk_deadlock_id` FOREIGN KEY (`deadlock_id`) REFERENCES `deadlock` (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n```\n> deadlock í…Œì´ë¸”ì„ ì°¸ì¡°í•˜ëŠ” deadlock_child í…Œì´ë¸” ìƒì„±.\n\n\n```sql\n# Client A \nSTART TRANSACTION;\nINSERT INTO `deadlock_child` (`deadlock_id`, `val`) VALUES (1, 101);\n```\n> ì²« ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìì‹ í…Œì´ë¸”ì— insertí•˜ì—¬ deadlock í…Œì´ë¸”ì˜ idê°€ 1ì¸ recordì˜ *s* lock íšë“.  \n\n```sql\n# Client B\nSTART TRANSACTION;\nINSERT INTO `deadlock_child` (`deadlock_id`, `val`) VALUES (1, 101);\n```\n> ë‘ ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•˜ê²Œ deadlock í…Œì´ë¸”ì˜ idê°€ 1ì¸ recordì˜ *s* lock íšë“.\n\n```sql\n# Client A\nUPDATE deadlock SET val = 101 where id = 1;\n```\n> ì²« ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ì—ì„œ *x* lock íšë“ì„ ìœ„í•´ ëŒ€ê¸°.\n\n```sql\n# Client B\nUPDATE deadlock SET val = 101 where id = 1;\n```\n> ë‘ ë²ˆì§¸ í´ë¼ì´ì–¸íŠ¸ë„ *x* lockì´ í•„ìš”. ì—¬ê¸°ì„œ deadlock ë°œìƒ.\n\nì´ê²ƒë„ ì§§ì€ ì‹œê°„ ì•ˆì— ê°™ì€ APIê°€ ë™ì‹œì— ìš”ì²­ë˜ì–´ ë°œìƒí•œ ë¬¸ì œë¼ê³  ì—¬ê²¨ì§„ë‹¤.\n\n###í•´ê²°ì€ ì–´ë–»ê²Œ í•˜ë‚˜?\nì´ê²ƒ ë˜í•œ MySQL [ë¬¸ì„œ](https://dev.mysql.com/doc/refman/5.7/en/innodb-deadlocks-handling.html)ì—ì„œ deadlockë¥¼ ì–´ë–»ê²Œ ìµœì†Œí™”í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œë ¤ì¤€ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” deadlockì´ ë°œìƒí•  ë•ŒëŠ” ì¬ì‹œë„ í•˜ë¼ê³  í•˜ê³  ìˆìœ¼ë©° íŠ¸ëœì­ì…˜ì„ ì§§ê²Œ ì„¤ì •í•˜ë¼ê³  í•˜ê³  ìˆë‹¤. `Confirm API`ì˜ ê²½ìš°ì—ëŠ” í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ìˆ˜í–‰ë˜ëŠ” ì¿¼ë¦¬ê°€ ìµœëŒ€ 50ê°œê°€ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `UPDATE ... WHERE IN` ìœ¼ë¡œ ë³€ê²½í•˜ë ¤ê³  í•œë‹¤. (2ê°œì˜ rowë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²½ìš°ì—ë„ deadlockì´ ë°œìƒí•˜ê¸°ë„ í–ˆë‹¤.)  \n`Comment Like API`ëŠ” ë¶€ëª¨ í…Œì´ë¸”ì„ ë¨¼ì € ì—…ë°ì´íŠ¸í•˜ë©´ deadlockì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì¿¼ë¦¬ì— í•„ìš”í•œ lockì„ ë¯¸ë¦¬ íšë“í•˜ê¸° ë•Œë¬¸ì¸ë° ìˆœì„œë¥¼ ë³€ê²½í•˜ì—¬ë„ ë¡œì§ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•Šê¸° ë•Œë¬¸ì— ìˆœì„œë¥¼ ë°”ê¿”ë„ ë¬´ë°©í•˜ë‹¤.\n","excerpt":"ë‚´ê°€ ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ê°œë°œí•œ ê²ƒ ì¤‘ì—ëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ì•Œë¦¼ê³¼ ì‘í’ˆ, ì‹œìŠ¤í…œì— ëŒ€í•œ ì•Œë¦¼ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” ê°€ ìˆê³  ëŒ“ê¸€ê³¼ ì‘í’ˆì˜ Rating, Likeâ€¦","fields":{"slug":"/cannot-acquire-lock-exception-research/"},"frontmatter":{"date":"Jun 19, 2020","title":"CannotAcquireLockExceptionê³¼ Deadlock","tags":["CannotAcquireLockException","deadlock"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingAAM8BS-THR)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int max;\n    private Integer incline;\n    private Integer prev;\n    private Stack<Pit> pitStack = new Stack<>();\n\n    public int solution(int[] A) {\n        prev = A[0];\n        pitStack.add(new Pit(prev));\n\n        for (int i=1; i<A.length; i++) {\n            int a = A[i];\n            int delta = a - prev;\n            Pit last = pitStack.peek();\n\n            if (changedToDecline(delta)) {\n                last.right = prev;\n                merge(last);\n                checkDepth(last);\n                removeInvalid();\n                pitStack.add(new Pit(prev));\n                incline = -1;\n\n            } else if (changedToIncline(delta)){\n                last.setBottom(prev);\n                incline = 1;\n\n                if (i == A.length - 1) {\n                    checkLastPit(last, a);\n                }\n\n            } else if (i == A.length - 1) {\n                checkLastPit(last, a);\n            }\n\n            prev = a;\n        }\n\n        return max;\n    }\n\n    private boolean changedToDecline(int delta) {\n        return (incline == null && delta < 0) || (incline != null && incline != -1 && delta < 0);\n    }\n\n    private boolean changedToIncline(int delta) {\n        return (incline == null && delta > 0) || (incline != null && incline != 1 && delta > 0);\n    }\n\n    private void merge(Pit pit) {\n        if (pit.isMergeable()) {\n            checkDepth(pit);\n            Pit mergeablePit = pitStack.pop();\n            while (!pitStack.isEmpty()) {\n                Pit pop = pitStack.pop();\n                mergeablePit.left = pop.left;\n                mergeablePit.setBottom(pop.bottom);\n                checkDepth(mergeablePit);\n\n                if (mergeablePit.left > mergeablePit.right) {\n                    break;\n                }\n            }\n\n            pitStack.add(mergeablePit);\n        }\n    }\n\n    private void removeInvalid() {\n        if (pitStack.peek().isInvalid()) {\n            pitStack.pop();\n        }\n    }\n\n    private void checkDepth(Pit pit) {\n        max = Math.max(max, pit.getDepth());\n    }\n\n    private void checkLastPit(Pit pit, int a) {\n        pit.right = a;\n        merge(pit);\n        checkDepth(pit);\n    }\n\n    private boolean isMergeable(Pit pit) {\n        return pit.right > pit.left;\n    }\n}\n\nclass Pit {\n\n    public Integer left;\n    public Integer right;\n    public Integer bottom;\n\n    public Pit(int left) {\n        this.left = left;\n    }\n\n    public int getDepth() {\n        if (isInvalid()) {\n            return 0;\n        } else {\n            return Math.min(left, right) - bottom;\n        }\n    }\n\n    public void setBottom(int bottom) {\n        if (this.bottom == null) {\n            this.bottom = bottom;\n        } else {\n            this.bottom = Math.min(this.bottom, bottom);\n        }\n    }\n\n    public boolean isInvalid() {\n        return (left == null || right == null || bottom == null) || (left == bottom || right == bottom);\n    }\n\n    public boolean isMergeable() {\n        return right > left;\n    }\n\n    public String toString() {\n        return String.format(\"%d %d %d\", left, right, bottom);\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-flood-depth/"},"frontmatter":{"date":"Sep 20, 2019","title":"Codility - FloodDepth","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingZVJNW6-EBH)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(int N, int[] P, int[] Q) {\n        int[] semiPrimeCount = getSemiPrimeCount(N);\n        int[] answer = new int[P.length];\n\n        for (int i=0; i<P.length; i++) {\n            answer[i] = semiPrimeCount[Q[i]] - semiPrimeCount[P[i] - 1];\n        }\n\n        return answer;\n    }\n\n    private int[] getSemiPrimeCount(int number) {\n        int[] semiPrimeCount = new int[number + 1];\n        int[] primeSieve = getPrimeSieve(number);\n\n        for (int i=1; i<primeSieve.length; i++) {\n            semiPrimeCount[i] = semiPrimeCount[i - 1];\n            if (primeSieve[i] != 0 && primeSieve[i / primeSieve[i]] == 0) {\n                semiPrimeCount[i]++;\n            }\n        }\n\n        return semiPrimeCount;\n    }\n\n    private int[] getPrimeSieve(int number) {\n        int[] primeSieve = new int[number + 1];\n\n        for (int i=2; i*i<=number; i++) {\n            if (primeSieve[i] == 0) {\n                for (int j=i*2; j<=number; j+=i) {\n                    if (primeSieve[j] == 0) {\n                        primeSieve[j] = i;\n                    }\n                }\n            }\n        }\n\n        return primeSieve;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-count-semiprimes/"},"frontmatter":{"date":"Sep 16, 2019","title":"Codility - CountSemiprimes","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\nì˜¤ëœë§Œì˜ ì½”ë”œë¦¬í‹°... ê·¼ 2ë‹¬ë§Œì´ë‹¤.    \n~~ê·¸ ë™ì•ˆ ì—¬ëŸ¬ê°€ì§€ ì¼ì´ ìˆì—ˆë‹¤.~~\n\n[RESULT](https://app.codility.com/demo/results/training48YVSX-VGN)\n\n``` java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(int[] A) {\n        int[] answer = new int[A.length];\n        Map<Integer, Integer> uniqueMap = setUniqueMap(A);\n        \n        for (int i=0; i<A.length; i++) {\n            int count = 0;\n            \n            for (int j=1; j*j<=A[i]; j++) {\n                if (A[i] % j == 0) {\n                    count += uniqueMap.getOrDefault(j, 0);\n                    if (j != A[i] / j) count += uniqueMap.getOrDefault(A[i] / j, 0);\n                }    \n            }\n            \n            answer[i] = A.length - count;\n        }\n        \n        return answer;\n    }\n    \n     private Map<Integer, Integer> setUniqueMap(int[] A) {\n        Map<Integer, Integer> uniqueMap = new HashMap<>();\n        for (int a : A) {\n            uniqueMap.put(a, uniqueMap.getOrDefault(a, 0) + 1);\n        }\n\n        return uniqueMap;\n    }\n}\n```\n","excerpt":"ì˜¤ëœë§Œì˜ ì½”ë”œë¦¬í‹°... ê·¼ 2ë‹¬ë§Œì´ë‹¤. ê·¸ ë™ì•ˆ ì—¬ëŸ¬ê°€ì§€ ì¼ì´ ìˆì—ˆë‹¤. RESULT","fields":{"slug":"/codility-count-non-divisible/"},"frontmatter":{"date":"Sep 10, 2019","title":"Codility - CountNonDivisible","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"[RESULT](https://app.codility.com/demo/results/trainingCR3WXZ-22T)\n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int max = -1;\n\n    public int solution(String S) {\n        String[] words = S.split(\" \");\n        for (String word : words) {\n            int digitsCount = 0;\n            int lettersCount = 0;\n            boolean found = true;\n\n            for (int i = 0; i < word.length(); i++) {\n                char character = word.charAt(i);\n                if (Character.isDigit(character)) {\n                    digitsCount++;\n                } else if (Character.isLetter(character)) {\n                    lettersCount++;\n                } else {\n                    found = false;\n                    break;\n                }\n            }\n\n            if (found && digitsCount % 2 == 1 && lettersCount % 2 == 0) {\n                max = Math.max(word.length(), max);\n            }\n        }\n\n        return max;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-longest-password/"},"frontmatter":{"date":"Sep 09, 2019","title":"Codility - LongestPassword","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingXHM2YD-TP9)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int[] absA;\n    private int sum;\n    private Map<Integer, Integer> countMap = new HashMap<>();\n    private int[] subset;\n\n    public int solution(int[] A) {\n        this.absA = getAbs(A);\n        this.sum = getSum(absA);\n        this.countMap = getCountMap(absA);\n        this.subset = new int[Math.max(sum, 1)];\n\n        Arrays.fill(subset, -1);\n        subset[0] = 0;\n\n        for (int key : countMap.keySet()) {\n            for (int i=0; i<sum/2+1; i++) {\n                if (subset[i] >= 0) {\n                    subset[i] = countMap.get(key);\n                } else if (i >= key && subset[i - key] > 0) {\n                    subset[i] = subset[i - key] - 1;\n                }\n            }\n        }\n\n        int res = sum;\n        for (int i=0; i<sum/2+1; i++) {\n            if (subset[i] >= 0) {\n                res = Math.min(res, sum - i * 2);\n            }\n        }\n\n        return res;\n    }\n\n    private int[] getAbs(int[] A) {\n        int[] absA = new int[A.length];\n        for (int i=0; i<A.length; i++) {\n            absA[i] = Math.abs(A[i]);\n        }\n\n        return absA;\n    }\n\n    private int getSum(int[] A) {\n        int sum = 0;\n        for (int i=0; i<A.length; i++) {\n            sum += A[i];\n        }\n\n        return sum;\n    }\n\n    private Map<Integer, Integer> getCountMap(int[] A) {\n        Map<Integer, Integer> countMap = new HashMap<>();\n        for (int i=0; i<A.length; i++) {\n            countMap.put(A[i], countMap.getOrDefault(A[i], 0) + 1);\n        }\n\n        return countMap;\n    }\n}\n```\në‚´ê°€ ì´í•´í•œ ë°”ë¥¼ ì ì–´ë³´ë©´, ë¬¸ì œëŠ” ì£¼ì–´ì§„ ìˆ˜ë“¤ì˜ í•©ì´ë‚˜ ì°¨ì˜ ì ˆëŒ€ê°’ì´ ê°€ì¥ ìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤. ë°”ê¿”ë§í•˜ë©´ ì£¼ì–´ì§„ ì§‘í•©ì„$$ S $$, ë¶€ë¶„ì§‘í•©ì„ $$ U $$ ë¼ í•˜ê³ , $$ S $$ ì—ì„œ $$ U $$ ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ìˆ˜ì˜ ì§‘í•©ì¸ $$ C $$ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒë•Œ $$ |SUM(U) - SUM(C)| $$ ê°€ ê°€ì¥ ì‘ì€ ê²ƒ. ì¦‰, ê°€ëŠ¥í•œ ë¶€ë¶„ì§‘í•©ë“¤ì„ ì°¾ê³  ê·¸ ë¶€ë¶„ì§‘í•©ê³¼ ë‚˜ë¨¸ì§€ ì§‘í•©ì˜ ì°¨ê°€ ê°€ì¥ ì‘ì€ ìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.  \n  \në¶€ë¶„ì§‘í•©ì˜ ì°¨ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ ì§‘í•©ì˜ ëª¨ë“  ìˆ˜ë¥¼ ë‹¤ ë”í•œ ì „ì²´í•©ì„ ì´ìš©í•œë‹¤.  \nì „ì²´í•©ì—ì„œ êµ¬í•˜ë ¤ëŠ” ë¶€ë¶„ì§‘í•©ì— 2ë¥¼ ê³±í•˜ê³  ë¹¼ì„œ ì°¨ë¥¼ êµ¬í•œë‹¤.  \nì˜ˆë¥¼ ë“¤ì–´, $$ S=\\{a, b, c, d, e\\} $$ ë¼ê³  í•˜ê³  $$ U=\\{a, b, c\\} $$ ë¼ê³  í•  ë•Œ $$ C=\\{d, e\\} $$ ì´ê³   \n\n$$ â‡’ a + b + c + d + e - 2(a + b + c) $$\n\n$$ â‡’ d + e - (a + b + c) $$\n\nì´ë¯€ë¡œ Sì™€ Cì˜ ì°¨ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë¶€ë¶„ì§‘í•©ì„ ì„ íƒ í•  ë•Œ $$ {a, b, c} $$ ë¥¼ ì„ íƒí•˜ëŠ” ê²½ìš°ì™€ $$ {d, e} $$ ë¥¼ ì„ íƒí•˜ëŠ” ê²½ìš°ì˜ ì°¨ê°€ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— $$ SUM(U) < SUM(S) / 2 $$\nê¹Œì§€ë§Œ ê³„ì‚° í•  ìˆ˜ ìˆë‹¤. \n\në¶€ë¶„ì§‘í•©ì„ êµ¬í•  ë•Œì—ëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ ë°”ì— ë”°ë¼ì„œ ë‘ ë¶€ë¶„ì˜ ë¶€ë¶„ì§‘í•© ì¤‘ í•©ì— ëŒ€í•œ ë¶€ë¶„ë§Œì„ ì°¾ì•„ë„ ë˜ë©° ê·¸ ë¶€ë¶„ì§‘í•©ì˜ í•©ì´ $$ SUM(S) / 2 $$ ì¸ ê²ƒê¹Œì§€ë§Œ ì°¾ìœ¼ë©´ ëœë‹¤. ê·¸ëŸ°ë° ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì§‘í•©ì— ê¸¸ì´ì— ë¹„í•´ ì§‘í•©ì˜ ìˆ˜ì˜ ë²”ìœ„ê°€ ì‘ìœ¼ë¯€ë¡œ ì¤‘ë³µëœ ìˆ˜ê°€ ë§ì´ ë°œìƒí•  ê²ƒì´ ì˜ˆì¸¡ê°€ëŠ¥í•˜ë¯€ë¡œ ê³„ì‚° ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ ë¶€ë¶„í•©ì„ êµ¬í•  ë•Œ ì§‘í•©ì˜ ì›ì†Œì˜ ê°¯ìˆ˜ë¥¼ í™œìš©í•˜ëŠ”ë° ë¶€ë¶„í•©ê³¼ ê°™ì´ ê¸°ë¡í•˜ë©°, ë¶€ë¶„í•©ì„ êµ¬í•˜ê³  ë‚¨ì€ ìˆ«ìë¥¼ ì˜ë¯¸í•œë‹¤.  \nì§‘í•©ì˜ ì›ì†Œë“¤ì„ $$ SUM(S) / 2 $$ ê¹Œì§€ ìˆœíšŒí•˜ë©´ì„œ ë¶€ë¶„í•©ì„ ì°¾ëŠ”ë°, ì´ì „ ë‹¨ê³„ë“¤ì—ì„œ ë§Œë“  ë¶€ë¶„í•©ì¼ ë•ŒëŠ” í˜„ì¬ ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ì¹´ìš´íŒ…ì„ ë„£ê³  ì´ë¯¸ êµ¬í•œ ë¶€ë¶„í•©ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë¶€ë¶„í•©ì´ë¼ë©´ ìˆ«ì í•˜ë‚˜ë¥¼ ë” ì‚¬ìš©í–ˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ì´ì „ ë‹¨ê³„ì—ì„œ 1ì„ ëº€ë‹¤. \n","excerpt":"RESULTâ€¦","fields":{"slug":"/codility-minabssum/"},"frontmatter":{"date":"Aug 30, 2019","title":"Codility - MinAbsSum","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingVK586S-S83)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    int[] A;\n    int[] memo = new int[100001];\n\n    public int solution(int[] A) {\n        this.A = A;\n        return getMaxDiceSum(A.length - 1);\n    }\n\n    private int getMaxDiceSum(int n) {\n        int maxSum = Integer.MIN_VALUE;\n\n        if (n == 0) {\n            return A[n];\n        } else if (memo[n] != 0) {\n            return memo[n];\n        }\n\n\n        for (int i=Math.max(n-6, 0); i<n; i++) {\n            maxSum = Math.max(maxSum, getMaxDiceSum(i));\n        }\n\n        memo[n] = A[n] + maxSum;\n        return memo[n];\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-number-solitaire/"},"frontmatter":{"date":"Aug 20, 2019","title":"Codility - NumberSolitaire","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"[RESULT](https://app.codility.com/demo/results/training5EJCP3-EAV)\n```java\nimport java.util.*;\n\nclass Solution {\n\n    public int solution(int[] A, int[] B) {\n        int start = 0;\n        int index = start;\n        int count = 0;\n\n        while (index < A.length) {\n            if (index == 0) {\n                count++;\n                index++;\n            } else if (A[index] > B[start]) {\n                count++;\n                start = index;\n            } else {\n                index++;\n            }\n        }\n\n        return count;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-max-nonoverlapping-segments/"},"frontmatter":{"date":"Aug 13, 2019","title":"Codility- MaxNonoverlappingSegments","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingJQ54QU-DAV)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int left;\n    private int right = left;\n    private int tied;\n    private int tiedCount;\n\n    public int solution(int K, int[] A) {\n\n        while (left < A.length && right < A.length) {\n            tied += A[right];\n\n            if (tied >= K) {\n                left = right + 1;\n                right = left;\n                tied = 0;\n                tiedCount++;\n            } else {\n                right++;\n            }\n        }\n\n        return tiedCount;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-tie-ropes/"},"frontmatter":{"date":"Aug 12, 2019","title":"Codility - TieRopes","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingF4ZCT7-ZXA)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    public int solution(int[] A) {\n        int min = Integer.MAX_VALUE;\n        int left = 0;\n        int right = A.length - 1;\n\n        Arrays.sort(A);\n\n        while (left <= right) {\n            int sum = A[left] + A[right];\n            int absSum = Math.abs(sum);\n\n            if (absSum < min) {\n                min = absSum;\n            }\n\n            if (sum < 0) {\n                left++;\n            } else {\n                right--;\n            }\n        }\n\n        return min;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-min-abs-sum-of-two/"},"frontmatter":{"date":"Aug 08, 2019","title":"Codility - MinAbsSumOfTwo","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\nê·¸ëƒ¥ ì´ë ‡ê²Œ í’€ë©´ ì•ˆ ë˜ë‚˜ í•´ì„œ í’€ì—ˆë˜ ë°©ë²•.  \n[RESULT](https://app.codility.com/demo/results/trainingA8478A-QW7)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    private Set<Long> set = new HashSet<>();\n\n    public int solution(int[] A) {\n        for (int a : A) {\n            set.add(Math.abs(Long.valueOf(a)));\n        }\n\n        return set.size();\n    }\n}\n```\n  \n*Caterpillar Method*ë¥¼ ì‚¬ìš©í•œ ë°©ë²•.  \nì„±ëŠ¥ì€ ì´ ê²½ìš°ëŠ” ì–‘ ëë‹¨ì—ì„œ ë²”ìœ„ë¥¼ ì¤„ì´ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥´ë‹¤.  \n[RESULT](https://app.codility.com/demo/results/trainingHW22JG-N6N)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    public int solution(int[] A) {\n        int count = 0;\n        int head = 0;\n        int tail = A.length - 1;\n\n        while (head <= tail) {\n            if (head > 0 && A[head] == A[head-1]) {\n                head++;\n                continue;\n            } \n            \n            if (tail < A.length-1 && A[tail] == A[tail+1]) {\n                tail--;\n                continue;\n            }\n\n            long absHead = Math.abs(Long.valueOf(A[head]));\n            long absTail = Math.abs(Long.valueOf(A[tail]));\n\n            if (absHead == absTail) {\n                tail--;\n                head++;\n            } else if (absHead < absTail) {\n                tail--;\n            } else {\n                head++;\n            }\n\n            count++;\n        }\n\n        return count;\n    }\n}\n```\n","excerpt":"ê·¸ëƒ¥ ì´ë ‡ê²Œ í’€ë©´ ì•ˆ ë˜ë‚˜ í•´ì„œ í’€ì—ˆë˜ ë°©ë²•. RESULT Caterpillar Methodë¥¼ ì‚¬ìš©í•œ ë°©ë²•. ì„±ëŠ¥ì€ ì´ ê²½ìš°ëŠ” ì–‘ ëë‹¨ì—ì„œ ë²”ìœ„ë¥¼ ì¤„ì´ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥´ë‹¤. RESULT","fields":{"slug":"/codility-abs-distinct/"},"frontmatter":{"date":"Aug 07, 2019","title":"Codility - AbsDistinct","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingF2MCJ8-MJ4)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    private int count = 0;\n    private int[] A;\n\n    public int solution(int[] A) {\n        this.A = A;\n        Arrays.sort(this.A);\n\n        for (int i=0; i<A.length-2; i++) {\n\n            int j = i + 1;\n            int k = j + 1;\n\n            while (j < A.length - 1) {\n                if (k < A.length && isTriangular(i, j, k)) {\n                    k++;\n                } else {\n                    count += (k - j - 1);\n                    j++;\n                }\n            }\n        }\n\n        return count;\n    }\n\n    private boolean isTriangular(int i, int j, int k) {\n        return A[i] + A[j] > A[k] && A[i] + A[k] > A[j] && A[j] + A[k] > A[i];\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-count-triangles/"},"frontmatter":{"date":"Aug 02, 2019","title":"Codility - CountTriangles","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"  \n[RESULT](https://app.codility.com/demo/results/trainingZKKKY3-C82)\n  \n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int count = 0;\n    private boolean[] memo;\n\n    public int solution(int M, int[] A) {\n        initMemo(M);\n        int i=0;\n        int j=0;\n\n        while (i<A.length && j<A.length) {\n            if (memo[A[j]]) {\n                memo[A[i]] = false;\n                i++;\n\n            } else {\n                memo[A[j]] = true;\n                count += (j - i + 1);\n                j++;\n            }\n\n            if (count > 1000000000) {\n                return 1000000000;\n            }\n        }\n\n        return count;\n    }\n\n    private void initMemo(int M) {\n        memo = new boolean[M + 1];\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-count-distinct-slice/"},"frontmatter":{"date":"Jun 03, 2019","title":"Codility - CountDistinctSlices","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingVX8AYH-4S7)\n\nCodilityì˜ ë¬¸ì œë“¤ì€ **RESPECTABLE** ì •ë„ë§Œ ë˜ì–´ë„ ì°¸ ì–´ë µë‹¤.  \nTLEê°€ ì™œ ë‚˜ëŠ”ì§€ ëª¨ë¥´ê² ì–´ì„œ í•œì°¸ì„ í—¤ë§¸ë‹¤.  \n  \nëª»ì„ ìœ„ì¹˜ ìˆœìœ¼ë¡œ ì •ë ¬ í•œ í›„ì—(ë¬¸ì œì˜ ì¡°ê±´ì´ ë„ë¹¤ì§€ë¥¼ ë‹¤ ë°•ì„ ìˆ˜ ìˆëŠ” ëª»ì˜ ì¸ë±ìŠ¤ ì´ë¯€ë¡œ ì´ì „ì˜  ìˆœì„œë¥¼ ê¸°ì–µí•˜ê²Œ í•œë‹¤.), ë„ë¹¤ì§€ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ëª»ì„ ë°•ì„ ìˆ˜ ìˆëŠ” ê°€ì¥ ì‘ì€ ì¸ë±ìŠ¤ë¥¼ ì°¾ê³ , ì°¾ì€ ì¸ë±ìŠ¤ë“¤ ì¤‘ì— ê°€ì¥ í° ìˆ˜ê°€ ì „ì²´ ë„ë¹¤ì§€ë¥¼ ë°•ì„ ìˆ˜ ìˆëŠ” ìµœì†Œì˜ ëª»ì˜ ìˆ˜ì´ë‹¤.  \n  \nê·¸ë¦¬ê³  ì•„ì§ë„ ì§ê´€ì ìœ¼ë¡œ ì´í•´ë˜ì§€ëŠ” ì•Šì§€ë§Œ, ë„ë¹¤ì§€ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ì°¾ì€ ê°€ì¥ ì‘ì€ ì¸ë±ìŠ¤ê°€ ì´ì „ì— ì°¾ì€ ì¸ë±ìŠ¤ë³´ë‹¤ ì‘ì„ ê²½ìš°ëŠ” ë” íƒìƒ‰í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ì¢…ë£Œ ì¡°ê±´ì„ ê±¸ì–´ì•¼ ì‹œê°„ì´ˆê³¼ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤.  \n\nì•„ í•˜ë‚˜ ë”, ëª»ì˜ ìœ„ì¹˜ì™€ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•˜ê¸°ìœ„í•´ Objectì˜ Listë¡œ ë§Œë“¤ê³  ì •ë ¬í•´ì„œ ì‚¬ìš© í–ˆì—ˆëŠ”ë°... ë°°ì—´ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì‹œê°„ ë‚´ì— í†µê³¼í•˜ì§€ ëª»í•œë‹¤.\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int[][] nailArray;\n    private int maxIndex = 0;\n\n    public int solution(int[] A, int[] B, int[] C) {\n        setNailArray(C);\n\n        for (int i=0; i<A.length; i++) {\n            if (!tryNail(A[i], B[i])) {\n                return -1;\n            }\n        }\n\n        return maxIndex;\n    }\n\n    private boolean tryNail(int start, int end) {\n        boolean success = false;\n        int minIndex = Integer.MAX_VALUE;\n        int successIndex = nailArray.length- 1;\n        int from = 0;\n        int to = nailArray.length - 1;;\n\n        while (from <= to) {\n            int index = (int) Math.ceil((float) (from + to) / 2);\n            int[] nail = nailArray[index];\n\n            if (start > nail[1]) {\n                from = index + 1;\n            } else if (end < nail[1]) {\n                to = index - 1;\n            } else {\n                to = index - 1;\n                successIndex = index;\n                success = true;\n            }\n        }\n\n        if (success) {\n            for (int i=successIndex; i<nailArray.length; i++) {\n                int[] nail = nailArray[i];\n                if (nail[1] > end) {\n                    break;\n                }\n\n                if (nail[0] < minIndex) {\n                    minIndex = nail[0];\n                }\n\n                if (minIndex <= maxIndex) {\n                    break;\n                }\n            }\n\n            if (minIndex > maxIndex) {\n                maxIndex = minIndex;\n            }\n        }\n\n        return success;\n    }\n\n    private void setNailArray(int[] C) {\n        nailArray = new int[C.length][2];\n        int count = 1;\n        for (int i=0; i<C.length; i++) {\n            nailArray[i][0] = count++;\n            nailArray[i][1] = C[i];\n        }\n \n        Arrays.sort(nailArray, (int[] x, int[] y) -> x[1] - y[1]);\n    }\n}\n```\n","excerpt":"RESULT Codilityì˜ ë¬¸ì œë“¤ì€ RESPECTABLE ì •ë„ë§Œ ë˜ì–´ë„ ì°¸ ì–´ë µë‹¤. TLEâ€¦","fields":{"slug":"/codility-nailingplanks/"},"frontmatter":{"date":"May 28, 2019","title":"Codility - NailingPlanks","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training8QKXXN-A6N)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int frontSum = 0;\n        int rearSum = 0;\n        int minSum = Integer.MAX_VALUE;\n        \n        for (int a : A) {\n            rearSum += a;\n        }\n        \n        for (int i=0; i<A.length - 1; i++) {\n            frontSum += A[i];\n            rearSum -= A[i];\n            int diffSum = Math.abs(frontSum - rearSum);\n            \n            if (minSum > diffSum) {\n                minSum = diffSum;\n            }\n        }\n        \n        return minSum;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-tape-equilibrium/"},"frontmatter":{"date":"Feb 21, 2019","title":"Codility - TapeEquilibrium","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingQ6NJRH-F2X)  \n  \n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int N) {\n        String s = Integer.toBinaryString(N);\n        int longestGap = 0;\n        int gap = 0;\n        \n        for (int i = 0; i < s.length(); i++) {\n            if (s.charAt(i) == '0') {\n                gap++;        \n            } else {\n                if (gap > longestGap) {\n                    longestGap = gap;\n                }\n                \n                gap = 0;\n            }\n        }\n        \n        return longestGap;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-binary-gap/"},"frontmatter":{"date":"Feb 20, 2019","title":"Codility - CountSemiprimes","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\nìµœê·¼ì— íšŒì‚¬ì—ì„œ ì‘ì€ ê·œëª¨ë¡œ ~~2ëª…ì´ì„œ~~ ìŠ¤í„°ë””ë¥¼ í•˜ê³  ìˆë‹¤. ë‚˜ëŠ” íŒŒì´ì¬ì„ ë°°ìš°ê³ , ìŠ¤í”„ë§ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì„ ë‚˜ì—ê²Œ ë¬¼ì–´ë³´ë©´ ê°„ëµíˆ ì¡°ì‚¬í•´ì„œ ë°œí‘œí•˜ëŠ” ì‹ìœ¼ë¡œ ì§„í–‰í•˜ê³  ìˆëŠ”ë° ì ì •í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ë²”ìœ„ì— ëŒ€í•œ ì–˜ê¸°ê°€ ë‚˜ì™€ì„œ ê·¸ê²ƒì— ëŒ€í•´ í•œë²ˆ ì°¾ì•„ë³´ë‹¤ê°€ \n[ì¬ë°ŒëŠ” ê¸€](https://stackoverflow.com/questions/90002/what-is-a-reasonable-code-coverage-for-unit-tests-and-why/9002)\nì„ ë°œê²¬í•´ì„œ ì•„ë˜ì— ì ì–´ë³¸ë‹¤.  \n   \n\n```none\nTestivus On Test Coverage\n\nì–´ëŠ ì´ë¥¸ ì•„ì¹¨, í•œ í”„ë¡œê·¸ë˜ë¨¸ê°€ í”„ë¡œê·¸ë˜ë°ì˜ ë‹¬ì¸ì—ê²Œ ë¬¼ì—ˆë‹¤.\n\"ì €ëŠ” ëª‡ ê°€ì§€ì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ì–´ëŠ ì •ë„ì˜ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ë¥¼ ëª©í‘œë¡œ í•´ì•¼ í•©ë‹ˆê¹Œ?\"  \n\në‹¬ì¸ì´ ëŒ€ë‹µí–ˆë‹¤.\n\"ì»¤ë²„ë¦¬ì§€ì— ëŒ€í•´ì„œëŠ” ê±±ì •í•˜ì§€ ë§ˆì‹œê³ , ì¢‹ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì“°ë©´ ë˜ëŠë‹ˆë¼.\"  \n\nê·¸ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì›ƒìœ¼ë©´ì„œ ì¸ì‚¬í•œ í›„ì— ë– ë‚¬ë‹¤.\n\n...\n\nê·¸ ë‹¤ìŒë‚ , ë‘ ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ê°€ ê°™ì€ ì§ˆë¬¸ì„ í–ˆë‹¤.\në‹¬ì¸ì´ ë¬¼ì´ ë“ëŠ” ì†¥ì„ ê°€ë¥´í‚¤ë©´ì„œ ë§í–ˆë‹¤.\n\"ì†¥ì— ìŒ€ì„ ì–¼ë§ˆë‚˜ ë„£ì–´ì•¼ í•˜ëŠ”ê°€?\"\n\nê·¸ í”„ë¡œê·¸ë˜ë¨¸ëŠ” ì˜ì•„í•´í•˜ë©´ì„œ ëŒ€ë‹µí–ˆë‹¤.\n\"ì œê°€ ê·¸ê±¸ ì–´ë–»ê²Œ ì••ë‹ˆê¹Œ? ë‹¹ì‹ ì´ ì–¼ë§ˆë‚˜ ë§ì€ ì‚¬ëŒì„ ë¨¹ì¼ ê²ƒì´ë©°, ê·¸ë“¤ì´ ì–¼ë§ˆë‚˜ ë°°ê³ í”„ë©°, ë‹¤ë¥¸ ìŒì‹ì€ ì£¼ì—ˆëŠ”ì§€, ìŒ€ì´ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ ë“±ë“±ì— ë‹¬ë ¸ì£ .\"\n\n\"ë°”ë¡œ ê·¸ê²ƒì¼ì„¸.\" ê±°ì¥ì´ ëŒ€ë‹µí–ˆìŠµë‹ˆë‹¤.\n\në‘ ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ë„ ì›ƒìœ¼ë©´ì„œ ì¸ì‚¬í•œ í›„ì— ë– ë‚¬ë‹¤.\n\n...\n\ní•˜ë£¨ê°€ ëë‚  ë¬´ë µ, ì„¸ ë²ˆì¬ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì™€ì„œ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ì— ëŒ€í•œ ê°™ì€ ì§ˆë¬¸ì„ í–ˆë‹¤.\n\"80% ì´í•˜ë¡œ!\" ë‹¬ì¸ ë‹¨í˜¸í•œ ëª©ì†Œë¦¬ë¡œ ê·¸ì˜ ì£¼ë¨¹ìœ¼ë¡œ ì±…ìƒì„ ë‚´ë¦¬ì¹˜ë©´ì„œ ëŒ€ë‹µí–ˆë‹¤.\n\nì„¸ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ë„ ì›ƒìœ¼ë©´ì„œ ì¸ì‚¬í•œ í›„ì— ë– ë‚¬ë‹¤.\n...\n\në§ˆì§€ë§‰ ëŒ€ë‹µ í›„ì—, ì œìê°€ ë‹¬ì¸ì—ê²Œ ë‹¤ê°€ì™”ë‹¤.\n\"ìŠ¤ìŠ¹ë‹˜, ì €ëŠ” ì˜¤ëŠ˜ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ì— ëŒ€í•œ ê°™ì€ ì§ˆë¬¸ì— ë‹¤ë¥¸ 3ê°œì˜ ëŒ€ë‹µì„ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì™œ ê·¸ë ‡ê²Œ í•˜ì…¨ìŠµë‹ˆê¹Œ?\"\n\në‹¬ì¸ì´ ê·¸ì˜ ì˜ìì—ì„œ ì¼ì–´ì„°ë‹¤.\n\"ë‚˜ì™€ ì°¨ í•œì” ë§ˆì‹œë©´ì„œ ì´ì•¼ê¸°ë¥¼ í•´ë³´ìê¾¸ë‚˜.\"\nê·¸ë“¤ì´ ì»µì— ëœ¨ê±°ìš´ ë…¹ì°¨ë¥¼ ì±„ìš´ í›„ì— ê±°ì¥ì€ ëŒ€ë‹µí•˜ê¸° ì‹œì‘í–ˆë‹¤.\n\n\"ì²« ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì´ì œ ë§‰ ìƒˆë¡­ê²Œ ì‹œì‘í•˜ëŠ” ë‹¨ê³„ì˜€ë‹¤. ê·¸ëŠ” ì§€ê¸ˆ ë§ì€ ì½”ë“œë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ, í…ŒìŠ¤íŠ¸ëŠ” ì—†ì§€. ê·¸ëŠ” ê°ˆ ê¸¸ì´ ë©€ì§€. \nì´ë•Œ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ì— ì´ˆì ì„ ë§ì¶”ëŠ” ê²ƒì€ ì§€ì¹˜ê²Œ ë§Œë“¤ê³  ì“¸ëª¨ì—†ëŠ” ê²ƒì´ì§€. \nê·¸ëŠ” ëª‡ ê°€ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ ê²ƒì´ì•¼. ì½”ë“œ ì»¤ë²„ë¦¬ì§€ì— ê±±ì •í•˜ëŠ” ê²ƒì€ ë‚˜ì¤‘ ì¼ì´ì§€.\"\n\n\"ë°˜ë©´ì— ë‘ ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ëŠ” í”„ë¡œê·¸ë˜ë°ê³¼ í…ŒìŠ¤íŒ…ì— ìƒë‹¹í•œ ê²½í—˜ì„ ê°€ì§€ê³  ìˆì§€. ë‚´ê°€ ê·¸ë…€ì—ê²Œ ìŒ€ì„ ì–¼ë§ˆë‚˜ ì†¥ì— ë„£ì–´ì•¼ í•˜ëƒê³  ë¬¼ì–´ë´„ìœ¼ë¡œì¨ \ní•„ìš”í•œ í…ŒìŠ¤íŠ¸ì˜ ì–‘ì€ ì—¬ëŸ¬ ê°€ì§€ ìš”ì†Œì— ë‹¬ë ¤ìˆë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ í•´ì£¼ì—ˆì§€. ê·¸ë¦¬ê³  ê·¸ë…€ëŠ” ìš”ì†Œë“¤ì— ëŒ€í•´ ìì‹ ì˜ ì½”ë“œë‹ˆê¹Œ ë‚˜ë³´ë‹¤ ë” ì˜ ì•Œ ê²ƒì´ë‹¤.\në‹¨ìˆœí•œ í•˜ë‚˜ì˜ ë‹µì€ ì—†ë‹¤. ê·¸ë…€ëŠ” ê·¸ ì‚¬ì‹¤ì„ ê°ë‹¹í•˜ê³  ë‹¤ë£°ë§Œí¼ ì¶©ë¶„íˆ ë˜‘ë˜‘í–ˆì§€.\n\n\"ê·¸ë ‡êµ°ìš”.\" ì Šì€ ì œìê°€ ë§í–ˆë‹¤. \"í•˜ì§€ë§Œ ë‹¨ìˆœí•œ í•˜ë‚˜ì˜ ë‹µë³€ì´ ì—†ë‹¤ë©´ ì„¸ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ì—ê²ŒëŠ” 80%ì´í•˜ë¼ê³  ëŒ€ë‹µí•˜ì…¨ìŠµë‹ˆê¹Œ?\"\në‹¬ì¸ì€ ì•„ì£¼ í¬ê²Œ ì›ƒì—ˆê³  ë…¹ì°¨ ë•Œë¬¸ë§Œì€ ì•„ë‹Œ ì´ìœ ë¡œ ë°°ê°€ ìœ„ì•„ë˜ë¡œ ì¶œë ê±°ë ¸ë‹¤.\n\n\"ì„¸ ë²ˆì§¸ í”„ë¡œê·¸ë˜ë¨¸ëŠ” í•˜ë‚˜ì˜ ì‰¬ìš´ ë‹µë³€ì„ ì›í–ˆì§€. ë‹¨ìˆœí•œ ëŒ€ë‹µì€ ì—†ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ë§ì´ì•¼... ì–´ì¨Œë“  ëŒ€ë‹µì„ ë”°ë¥´ì§€ ì•Šì„ ê±¸ì„¸.\"\nì–´ë¦° ì œìì™€ ë¨¸ë¦¬ê°€ í¬ë—í¬ë—í•œ ë‹¬ì¸ì€ ì¡°ìš©íˆ ì‚¬ìƒ‰ì— ì ê²¨ ì°¨ë¥¼ ë§ˆì…¨ë‹¤.\n```\n","excerpt":"ìµœê·¼ì— íšŒì‚¬ì—ì„œ ì‘ì€ ê·œëª¨ë¡œâ€¦","fields":{"slug":"/testivus-on-test-coverage/"},"frontmatter":{"date":"Jan 16, 2019","title":"Testivus On Test Coverage","tags":["testCoverage"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training3MEQQJ-B5R)\n\nì–´ë µë‹¤.  \nì›í•˜ëŠ” ê°’ì„ ì°¾ê¸° ìœ„í•´ ì´ì§„íƒìƒ‰ì„ ì ìš©í•œ ê²ƒë„ ìƒê°ì§€ë„ ëª»í–ˆìœ¼ë©°  \nêµ¬ê°„ìœ¼ë¡œ ì°¾ëŠ” ê°’ì„ êµ¬ì„±í•  ìˆ˜ ìˆëŠ”ì§€ íŒë³„í•˜ëŠ” ë¡œì§ë„ ì§ê´€ì ìœ¼ë¡œ ì™€ë‹¿ì§€ ì•ŠëŠ”ë‹¤.  \ní•œë‹¬ ë’¤ì— ë‹¤ì‹œ í‘¸ë ¤ë©´ í’€ ìˆ˜ìˆì„ê¹Œ?  \n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int K, int M, int[] A) {\n    \tint low = Arrays.stream(A).max().getAsInt();\n    \tint up = Arrays.stream(A).sum();\n    \tint res = up;\n\n    \twhile (low <= up) {\n    \t\tint mid = (low + up) / 2;\n    \t\tif (isDivision(K, mid, A)) {\n    \t\t\tres = mid;\n    \t\t\tup = mid - 1;\n    \t\t} else {\n    \t\t\tlow = mid + 1;\n    \t\t}\n    \t}\n\n    \treturn res;\n    }\n\n    private boolean isDivision(int K, int target, int[] A) {\n    \tint sum = 0;\n    \tint count = 1;\n    \tfor (int a: A) {\n    \t\tsum += a;\n    \t\tif (sum > target) {\n    \t\t\tsum = a;\n    \t\t\tcount++;\n    \t\t}\n\n    \t\tif (count > K) return false;\n    \t}\n\n    \treturn true;\n    }\n}\n```\n","excerpt":"RESULT ì–´ë µë‹¤. ì›í•˜ëŠ” ê°’ì„ ì°¾ê¸° ìœ„í•´ ì´ì§„íƒìƒ‰ì„ ì ìš©í•œ ê²ƒë„ ìƒê°ì§€ë„ ëª»í–ˆìœ¼ë©° êµ¬ê°„ìœ¼ë¡œ ì°¾ëŠ” ê°’ì„ êµ¬ì„±í•  ìˆ˜ ìˆëŠ”ì§€ íŒë³„í•˜ëŠ” ë¡œì§ë„ ì§ê´€ì ìœ¼ë¡œ ì™€ë‹¿ì§€ ì•ŠëŠ”ë‹¤. í•œë‹¬ ë’¤ì— ë‹¤ì‹œ í‘¸ë ¤ë©´ í’€ ìˆ˜ìˆì„ê¹Œ?","fields":{"slug":"/codility-min-max-division/"},"frontmatter":{"date":"Jan 10, 2019","title":"Codility - MinMaxDivisions","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingW4K5MR-6BF)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    private static int[] fib  = new int[50001];\n\n    public int[] solution(int[] A, int[] B) {\n        fib[1] = 1;\n        fib[2] = 2;\n\n        int[] res = new int[A.length];\n\n        for (int i=3; i<fib.length; i++) {\n            fib[i] = (fib[i-1] + fib[i-2]) % getPow(30);\n        }\n\n        for (int i=0; i<A.length; i++) {\n            res[i] = fib[A[i]] % getPow(B[i]);\n        }\n\n        return res;\n    }\n\n    private int getPow(int b) {\n        return (int) Math.pow(2, b);\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-ladder/"},"frontmatter":{"date":"Jan 07, 2019","title":"Codility - Ladder","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingGPZ6UE-VNF)\n  \nì²˜ìŒì— ì‘ì„±í–ˆë˜ ì½”ë“œëŠ” ì„±ëŠ¥ì—ì„œ ê¹Œì˜€ëŠ”ë° ê°œêµ¬ë¦¬ê°€ ë„ì°©í•´ë„ íƒìƒ‰ì„ ê³„ì†í–ˆê¸° ë•Œë¬¸.  \nìµœì†Œì˜ ì í”„ íšŸìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì²˜ìŒ ë„ì°©í–ˆì„ ë•Œ ì¢…ë£Œí•˜ë„ë¡ í–ˆë‹¤.\n  \n```java\nimport java.util.*;\n\nclass Solution {\n\n    private int[] question;\n    private List<Integer> fibonacci = new ArrayList<>();\n    private Set<Integer> memoization = new HashSet<>();\n    private Queue<JumpState> probability = new LinkedList<>();\n\n    public int solution(int[] A) {\n        question = A;\n        fibonacci = getFibonacci(question.length);\n\n        testProbability(question.length, 0);\n\n        while (!probability.isEmpty()) {\n            JumpState p = probability.poll();\n\n            if (p.getIndex() == -1) {\n                return p.getJump();\n            } else {\n                testProbability(p.getIndex(), p.getJump());\n            }\n        }\n\n        return -1;\n    }\n\n    private void testProbability(int n, int j) {\n        int f = 0;\n\n        for (int i=1; f<=n+1 && i<fibonacci.size(); i++) {\n            f = fibonacci.get(i);\n            int index = n - f;\n\n            if (isLeafIndex(index)) {\n                JumpState jumpState = new JumpState(index, j + 1);\n\n                if (!memoization.contains(index)) {\n                    probabilityClearIfFound(index);\n                    probability.add(jumpState);\n                    memoization.add(index);\n                }\n            }\n        }\n    }\n\n    private boolean isLeafIndex(int index) {\n        return index == -1 || (isValid(index) && question[index] == 1);\n    }\n\n    private boolean isValid(int index) {\n        return index >= 0 && index < question.length;\n    }\n\n    private void probabilityClearIfFound(int index) {\n        if (index == -1) {\n            probability.clear();\n        }\n    }\n\n    private List<Integer> getFibonacci(int maxNumber) {\n        List<Integer> fibonacci = new ArrayList<>();\n        int first = 0;\n        int second = 1;\n\n        fibonacci.add(first);\n\n        do {\n            fibonacci.add(second);\n            second = first + second;\n            first = second - first;\n\n        } while (second <= maxNumber + 1);\n\n        return fibonacci;\n    }\n\n    private class JumpState {\n        private int index;\n        private int jump;\n\n        public JumpState(int index, int jump) {\n            this.index = index;\n            this.jump = jump;\n        }\n\n        public int getIndex() {\n            return index;\n        }\n\n        public int getJump() {\n            return jump;\n        }\n    }\n}\n```\n","excerpt":"RESULT ì²˜ìŒì— ì‘ì„±í–ˆë˜ ì½”ë“œëŠ” ì„±ëŠ¥ì—ì„œ ê¹Œì˜€ëŠ”ë° ê°œêµ¬ë¦¬ê°€ ë„ì°©í•´ë„ íƒìƒ‰ì„ ê³„ì†í–ˆê¸° ë•Œë¬¸. ìµœì†Œì˜ ì í”„ íšŸìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì²˜ìŒ ë„ì°©í–ˆì„ ë•Œ ì¢…ë£Œí•˜ë„ë¡ í–ˆë‹¤.","fields":{"slug":"/codility-fib-flog/"},"frontmatter":{"date":"Dec 04, 2018","title":"Codility - FibFlog","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training4D4R6R-VPA)\n\nì´í•´ê°€ ì˜ ì•ˆê°€ëŠ” ì–´ë ¤ìš´ ë¬¸ì œë‹¤.  \nì°¸ê³ í–ˆë˜ ê²ƒ ì¤‘ì—ëŠ” [ìš” ì„¤ëª…](http://www.davidespataro.it/solution-to-the-codility-common-prime-divisors-set-problem)ì´ ê°€ì¥ ë‚«ë‹¤.\nìš”ì•½í•˜ìë©´,\n- ì†Œìˆ˜ì˜ ì•½ìˆ˜ ì§‘í•©ì´ ê°™ìœ¼ë ¤ë©´ ë‘ ì§‘í•©ì´ ì„œë¡œì—ê²Œ ì†í•´ì•¼í•œë‹¤.\n- ìµœëŒ€ ê³µì•½ìˆ˜ë¥¼ ë¹¼ë©´ì„œ í¬í•¨ë˜ê³  ìˆëŠ”ì§€ë¥¼ í¬í•¨í•œë‹¤\n- ìˆ˜ë¥¼ ì†Œì¸ìˆ˜ë¶„í•´ëœ í˜•íƒœë¡œ ì´í•´í•˜ë©´ ì¢€ í¸í•˜ë‹¤.\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    public int solution(int[] A, int[] B) {\n        int count = 0;\n        for (int i=0; i<A.length; i++) {\n            if (hasPrimeDivisorsSet(A[i], B[i]) && (hasPrimeDivisorsSet(B[i], A[i]))) {\n                count++;\n            }\n        }\n\n        return count;\n    }\n\n    private boolean hasPrimeDivisorsSet(int A, int B) {\n        int gcd;\n        while ((gcd = gcd(A, B)) != 1) {\n            A = A / gcd;\n        }\n\n        return A == 1;\n    } \n\n    private int gcd(int A, int B) {\n        while (A % B != 0) {\n            int tmp = B;\n            B = A % B;\n            A = tmp; \n        }\n\n        return B;\n    }\n}\n```\n","excerpt":"RESULTâ€¦","fields":{"slug":"/codility-common-prime-divisors/"},"frontmatter":{"date":"Oct 04, 2018","title":"Codility - CommonPrimeDivisors","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingAXMVME-255)\n\n```java\nimport java.util.*;\n\nclass Solution {\n\n    public int solution(int N, int M) {\n        return N / gcd(N, M);\n    }\n\n    private int gcd(int a, int b) {\n        int tmp;\n        while (a % b != 0) {\n            tmp = a;\n            a = b;\n            b = tmp % b;\n        }\n\n        return b;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-chocolates-by-numbers/"},"frontmatter":{"date":"Sep 21, 2018","title":"Codility - ChocolatesByNumbers","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\në°œë“± ê³¨ì ˆ í›„ 2ë‹¬ì´ ì§€ë‚œ í›„ì— ì¨ë³´ëŠ” í›„ê¸°.  \nê·€ì°®ì§€ë§Œ ì‹¬ì‹¬í•´ì„œ(?) ì¨ë³¸ë‹¤.  \n  \n      \nì‚¬ê±´ ë°œë‹¨\n========\n2018ë…„ 6ì›” 23ì¼ë‚  í† ìš”ì¼... ê¹€í¬ì—ì„œ í•˜ëŠ” ê²°í˜¼ì‹ì„ ê°€ê¸°ìœ„í•´ ì•„ì¹¨ ì¼ì¹™ë¶€í„° ì¼ì–´ë‚¬ì—ˆë‹¤. ì™€ì´í”„ ì¹œì²™ì˜ ê²°í˜¼ì‹ì´ì˜€ê¸° ë•Œë¬¸ì— ì¥ì¸ á›« ì¥ëª¨ë‹˜ì´ ìš°ë¦¬ ì§‘ì— ì˜¤ì…¨ê³ \nìƒˆë¡œ ì‚° ì¹´ì‹œíŠ¸ë¥¼ ì°¨ì— ì‹£ê¸°ìœ„í•´ ì¹´ì‹œíŠ¸ë¥¼ ë“¤ê³  ì§€í•˜ 1ì¸µ ì£¼ì°¨ì¥ìœ¼ë¡œ ë‚´ë ¤ê°”ìœ¼ë‚˜ ì°¨ê°€ ì—†ì—ˆë‹¤. ê·¸ë ‡ë‹¤ë©´.. ì§€í•˜ 2ì¸µì— ìˆê² ê±°ë‹ˆí•˜ê³  ê³„ë‹¨ìœ¼ë¡œ ê°€ë ¤ê³  ìƒê°í–ˆì—ˆë‹¤.\n~(ê·¸ëŸ° ìƒê°ì€ í•˜ì§€ ë§ì•˜ì–´ì•¼ í–ˆëŠ”ë°)~ ê³„ë‹¨ì„ ê±°ì˜ ë‹¤ ë‚´ë ¤ì™”ì„ ë•Œ ì¯¤ ë§ˆì§€ë§‰ ë°œì„ ë‚´ë”›ì—ˆì„ ë•Œ ì˜¤ë¥¸ë°œì„ ì ‘ì§ˆë ¸ë‹¤. \n\nê°€ì¥ ë¨¼ì € ë“  ìƒê°ì€ ì—­ëŒ€ê¸‰ìœ¼ë¡œ ì‹¬í•˜ê²Œ ì ‘ì§ˆë ¸ë‹¤ê³  ìƒê°í–ˆê³  í†µì¦ì´ ìˆì—ˆì§€ë§Œ ì ê¹ ê·¸ëŸ¬ê² ê±°ë‹ˆí•˜ê³  ìš´ì „ëŒ€ì— ì˜¬ëë‹¤. ê²°í˜¼ì‹ì¥ì—ì„œë„ ì ˆë£©ê±°ë¦¬ë©´ì„œ ìŒì‹ì€ ê°€ì ¸ë‹¤ ì˜ ë¨¹ì—ˆê³ \nëŒì•„ì˜¤ëŠ” ê¸¸ì—ë„ í†µì¦ì´ ê³„ì† ë˜ê³  ì§‘ì— ë„ì°©í•´ì„œ ì‹ ë°œì„ ë²—ì–´ë³´ë‹ˆ ë°œì´ ê³°ë°œë°”ë‹¥ ë§ˆëƒ¥ ë¶€ì–´ìˆì—ˆë‹¤. (ì´ ë•Œë¶€í„° ë­”ê°€ ì˜ëª»ë¬ë‹¤ê³  ëŠë‚€ê±° ê°™ë‹¤.) í† ìš”ì¼ì´ ì˜€ê¸° ë•Œë¬¸ì— ì‘ê¸‰ì‹¤ë¡œ ê°€ê²Œë˜ì—ˆê³  ê³¨ì ˆì„ ì§„ë‹¨ë°›ìœ¼ë©° ë°˜ê¹ìŠ¤ì™€ ëª©ë°œì‹ ì„¸ë¥¼ ì§€ê²Œë˜ë©´ì„œ ì§€ê¸ˆê¹Œì§€ë„ ê³ í†µì„ ë°›ê³ ìˆë‹¤.\n\n  \nì‚¬ê±´ ê²½ê³¼\n========\në‚´ ë‹¤ë¦¬ëŠ” ë°˜ê¹ìŠ¤ì—ì„œ â†’ ê¹ìŠ¤ â†’ ë³´ì¡°ê¸°ë¥¼ ê±°ì³¤ê³  1ë‹¬ì´ ë„˜ê²Œ ëª©ë°œê³¼ í•œ ë‹¤ë¦¬ë¡œë§Œ ì‚´ì•˜ë‹¤. (ë‹¤ì¹œ ë‹¤ë¦¬ê°€ ì ì  ì–†ì•„ì§€ë”ë¼..) ë°˜ê¹ìŠ¤ë¡œëŠ” 2ì£¼, ê¹ìŠ¤ëŠ” 4ì£¼ ì •ë„ í•˜ê³  ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤. ë‹¤ì¹˜ê³  ë‚˜ì„œëŠ” ë‹¤ë¦¬ê°€ ë•¡ë•¡ ë¶€ì–´ì„œ ì˜ ë•ŒëŠ” ë‹¤ë¦¬ì— ë°°ê²Œë¥¼ ë‘ê³  ì¤ë‹¤. ì¡°ê¸ˆë§Œ ì˜¬ë¦¬ê³  ìˆì–´ë„ ë¶“ê¸°ê°€ í™•ì‹¤íˆ ê¸ˆë°© ë¹ ì¡Œë‹¤. ë‹¤ë¦¬ê°€ ë¶€ì—ˆì„ ë•ŒëŠ” ì €ë¦¿ì €ë¦¿í•˜ê³  ì•‰ì•„ ìˆì§€ë„ ëª»í•˜ê² ë”ë¼. ë‹¤ë¦¬ëŠ” ì²˜ìŒ ê²ªì–´ë³´ëŠ” ê³¨ì ˆì¸ë° ì •ë§ ë”ë””ê²Œ ë‚®ëŠ”ë‹¤. í•˜ë£¨ë‹¨ìœ„ë¡œëŠ” ì˜ ëŠê»´ì§€ì§€ ì•Šê³  ì¼ì£¼ì¼ ì •ë„ë¡œëŠ” ë‚®ê¸´ ë‚®ëŠ”ë° í‰ì†Œì—ëŠ” ì‰½ê²Œ í•˜ë˜ ê²ƒ ë“¤ë„ í•˜ì§€ ëª»í•´ ë„ëŒ€ì²´ ì–¸ì œ ê±¸ì„ ìˆ˜ ìˆë‚˜í•˜ëŠ” ë‹µë‹µí•¨ì´ ë§ì´ ë“¤ì—ˆë‹¤. ê¹ìŠ¤ë¥¼ í‘¸ë¥´ê³ ë„ ë°”ë¡œ ê±·ì§€ë„ ëª»í–ˆë‹¤. ì˜ì‚¬ëŠ” ê±¸ìœ¼ë¼ëŠ”ë° ê±¸ì„ ìˆ˜ ìˆì–´ì•¼ ê±·ì§€ ì•„íŒŒ ì£½ê² ëŠ”ë°... ë‚˜ëŠ” ì£¼ë§ì´ì—¬ì„œ ì‹œë‚´ì˜ ì¢…í•©ë³‘ì› ì‘ê¸‰ì‹¤ë¡œ ê°„ í›„ ê·¸ ê³³ì—ì„œ ì§„ë£Œë¥¼ ê³„ì† ë°›ì•˜ëŠ”ë° ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ê°ˆê±¸ ê·¸ë¬ë‹¤. ë³‘ì›ê³¼ì˜ ê±°ë¦¬ë„ ê·¸ë ‡ê³  ê²°ì •ì ìœ¼ë¡œ ì˜ì‚¬ ì„ ìƒë‹˜ì´ ë³„ë¡œì˜€ë‹¤. ê³¨ì ˆì´ë¼ ë­ íŠ¹ë³„íˆ ì§„ë£Œ í•´ì£¼ëŠ” ê²ƒì€ ì—†ê² ë‹¤ë§Œ ì§€ê¸ˆ ë‚´ ìƒí™©ê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ íŒì— ë°•íŒ ë§ì„ í•˜ëŠ” ëŠë‚Œì´ë‚˜ ë³´ì¡°ê¸°ë¥¼ êµ¬ì…í•˜ë¼ê³  ê¶Œìœ í•œ ê²ƒ ì  ë“± ë³‘ì›ì„ ë‹¤ë‹ ìˆ˜ë¡ ì‹ ë¢°ê°€ ë§ì´ ê¹ì´ëŠ” ëŠë‚Œì´ì˜€ë‹¤.\n\nì¶œ á›« í‡´ê·¼ë„ ì°¸ í˜ë“¤ì—ˆë‹¤. ì°¨ë¥¼ ì–»ì–´ íƒ€ê±°ë‚˜ íƒì‹œíƒ€ê³  ì§€í•˜ì² ì—­ê¹Œì§€ ê°„ í›„ 20ë¶„ ì •ë„ë¥¼ ê°€ì•¼í•˜ëŠ”ë° ìš´ì´ ë‚˜ë¹  ìë¦¬ì— ì•‰ì§€ ëª»í•  ë•Œê°€ ìˆëŠ”ë° ê·¸ëƒ¥ ì§€í•˜ì²  ë°”ë‹¥ì— ì•‰ì•„ì„œ ê°ˆê¹Œ í•˜ëŠ” ìƒê°ì´ ë§ì´ ë“¤ì—ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì´ ëª©ë°œì„ ì§šê³ ìˆì–´ë„ ì•Œì•„ë´ ì£¼ê³  ë¹„ì¼œì£¼ê±°ë‚˜ í•˜ì§€ëŠ” ì•Šì•˜ë‹¤. ë¬¼ë¡  ê³ ë§™ê²Œë„ ê·¸ë ‡ê²Œ í•´ì£¼ì‹  ë¶„ë“¤ë„ ìˆì—ˆë‹¤. ì£¼ë¡œ ë…¸ì•½ìì„ ìª½ì— íƒ”ì—ˆëŠ”ë° ì˜¤íˆë ¤ ì¼ë°˜ì„ ë³´ë‹¤ ë…¸ì•½ìì„ì— ì•‰ì•„ ê³„ì‹  ë¶„ë“¤ì´ ë” ì˜ ë¹„ì¼œì£¼ê¸°ë„ í–ˆë‹¤. ê·¸ ì‚¬ëŒë“¤ì´ ë°‰ê±°ë‚˜ í•˜ì§€ëŠ” ì•Šë‹¤. ì• ì´ˆì— ê·¸ëŸ´ ê²ƒì´ë¼ ìƒê°í•˜ê³  ì•„ë¬´ëŸ° ê¸°ëŒ€ë„ í•˜ì§€ ì•Šì•˜ê³  ëŒ€ë¶€ë¶„ í•¸ë“œí°ì„ ë³´ëŠë¼ ì•„ì˜ˆ ë³´ì§€ ëª»í•œ ì‚¬ëŒì´ ëŒ€ë‹¤ìˆ˜ ì¼ ê²ƒì´ë‹¤. ì•„ë¬´íŠ¼ ê°„ì— í˜ë“¤ì–´ì„œ ë§ˆì¹¨ ì¼ë„ ì—†ê³  ê·¸ë§Œë‘ê² ë‹¤ê³  ì–˜ê¸° í•œ í›„ê¸°ë„ í•´ì„œ(...) ì¼ ìˆì„ ë•Œë§Œ ì¶œê·¼í•˜ê² ë‹¤ê³  í•˜ê³  ì¼ì£¼ì¼ì— 2 ~ 3ë²ˆë§Œ ì¶œê·¼í–ˆì—ˆë‹¤.\n\n  \nì‚¬ê±´ ê²°ë§\n========\nì•„ì§ ë‹¤ ë‚®ì§€ëŠ” ì•Šì•˜ë‹¤. ê·¸ë ‡ì§€ë§Œ ì´ì œëŠ” ë³´í†µ ê±¸ìŒê±¸ì´ì˜ ì†ë„ë¥¼ íšŒë³µí–ˆê³  ê±¸ì—ˆì„ ë•Œì˜ í†µì¦ë„ ê±°ì˜ ì—†ì§€ë§Œ ë°œì´ ë¶“ëŠ” í˜„ìƒì€ ì•„ì§ ìˆë‹¤. ê·¸ë¦¬ê³  ë°œëª©ì˜ ê°€ë™ ë²”ìœ„ê°€ ì¤„ì—ˆê³  ìš”ìƒí•˜ê²Œë„ ë°œëìœ¼ë¡œ ë”›ì—ˆì„ ë•Œì˜ í†µì¦ì´ ìˆë‹¤. ë°œì„ ë‹¤ì¹˜ê³  ì—¬ëŸ¬ê°€ì§€ë¥¼ ëŠê¼ˆì§€ë§Œ ì—¬ëŸ¬ëª¨ë¡œ ëª¸ ì•„í”„ë©´ ì •ë§ ë‚˜ë§Œ ê³ ìƒí•œë‹¤ëŠ” ê²ƒê³¼ ê°€ì¥ì˜ ë¬´ê²Œë¥¼ ë‹¤ì‹œ í•œë²ˆ ëŠë¼ê²Œ ë˜ì—ˆë‹¤. ëª©ë°œì´ ì¡°ê¸ˆë§Œ ë¬¼ê¸°ê°€ ìˆì–´ë„ ë¯¸ë„ëŸ¬ì§€ëŠ” ê±´ì§€ ì§€í•˜ì£¼ì°¨ì¥ì—ì„œ ëª©ë°œì´ ë¯¸ë„ëŸ¬ì ¸ í¬ê²Œ ë„˜ì–´ì§„ ì ì´ ìˆì—ˆëŠ”ë° ì•„í”ˆ ê²ƒë„ ì•„í”ˆ ê±°ì§€ë§Œ ì„œëŸ¬ì›Œì„œ ì£¼ì € ì•‰ì•„ì„œ ëª©ë†“ì•„ ìš¸ê³ ì‹¶ì—ˆë‹¤. 100ë…„ë§Œì˜ ìµœì•…ì˜ ì—¬ë¦„ì´ì˜€ë‹¤ëŠ”ë°... ì´ ë³´ë‹¤ ë” ë‚˜ìœ ì—¬ë¦„ì€ ë‚´ ì¸ìƒì—ì„œ ì—†ì—ˆìœ¼ë©´ í•œë‹¤.\n","excerpt":"ë°œë“± ê³¨ì ˆ í›„ 2ë‹¬ì´ ì§€ë‚œ í›„ì— ì¨ë³´ëŠ” í›„ê¸°. ê·€ì°®ì§€ë§Œ ì‹¬ì‹¬í•´ì„œ(?) ì¨ë³¸ë‹¤.   ì‚¬ê±´ ë°œë‹¨ 2018ë…„ 6ì›” 2â€¦","fields":{"slug":"/foot-fracture-epilogue/"},"frontmatter":{"date":"Sep 10, 2018","title":"ë°œë“± ê³¨ì ˆ í›„ê¸°","tags":["gibberish"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingDZA6NM-XV9)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        List<Integer> peekList = new ArrayList<>();\n        for (int i=1; i<A.length-1; i++) {\n            if (A[i] > A[i-1] && A[i] > A[i+1]) {\n                peekList.add(i);\n                i++;\n            }\n        }\n        \n        for (int i=1; i<=A.length; i++) {\n            if (A.length % i == 0) {\n                int size = A.length / i;\n                int foundCount = 0;\n                \n                for (int peek : peekList) {\n                    if (peek / i > foundCount) {\n                        break;\n                    }\n                    \n                    if (peek / i == foundCount) {\n                        foundCount++;            \n                    }\n                }\n                \n                if (foundCount >= size) {\n                    return size;        \n                }\n            }\n        }       \n        \n        return 0;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-peek/"},"frontmatter":{"date":"Jun 15, 2018","title":"Codility - Peek","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"![](../src/images/amazon-web-service.jpeg)\n\nì—­ì‹œ íšŒì‚¬ì—ì„œ êµ´ëŸ¬ë‹¤ë‹ˆë˜ ì±….  \n\nAWSì— ëŒ€í•œ ê´€ì‹¬ì€ ìˆì—ˆê³  AWSìƒì—ì„œ ì‘ì—…í•´ì•¼ë  ì¼ì´ ìˆì„ ê²ƒ ê°™ì•„ì„œ ë³´ê²Œ ë˜ì—ˆë‹¤.  \nì£¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ì„œë¹„ìŠ¤ë“¤(IAM, S3, VPC, EC2, RDS, ELB, CloudFront)ì— ëŒ€í•œ ê°„ë‹¨í•œ ì†Œê°œì™€ ê³¼ê¸ˆ ë°©ì‹ ê·¸ë¦¬ê³  ì‹¤ìŠµ ìœ„ì£¼ë¡œ êµ¬ì„±ëœ ì…ë¬¸ìš© ì±…ì´ë‹¤.  \nì•„ë§ˆì¡´ì—ì„œ ë§¤ì›” êµìœ¡ì„ ì§„í–‰í•´ì„œ ëª‡ ì°¨ë¡€ ë‹¤ë…€ ì™”ëŠ”ë° ì´ê²ƒ ë§ê³ ë„ AWSëŠ” ë°°ìš¸ ìˆ˜ ìˆëŠ” ìë£Œê°€ ë§ì€ ê²ƒ ê°™ë‹¤.\n","excerpt":"ì—­ì‹œ íšŒì‚¬ì—ì„œ êµ´ëŸ¬ë‹¤ë‹ˆë˜ ì±….   AWSì— ëŒ€í•œ ê´€ì‹¬ì€ ìˆì—ˆê³  AWSìƒì—ì„œ ì‘ì—…í•´ì•¼ë  ì¼ì´ ìˆì„ ê²ƒ ê°™ì•„ì„œ ë³´ê²Œ ë˜ì—ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ì„œë¹„ìŠ¤ë“¤(IAM, S3, VPC, EC2, RDS, ELB, CloudFrontâ€¦","fields":{"slug":"/book-amazon-web-service/"},"frontmatter":{"date":"May 16, 2018","title":"ì˜ˆì œë¥¼ í†µí•´ ì‰½ê²Œ ë”°ë¼í•˜ëŠ” - ì•„ë§ˆì¡´ ì›¹ ì„œë¹„ìŠ¤","tags":["book"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingU9W998-SJH)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        List<Integer> peekList = new ArrayList<>();\n        for (int i=1; i<A.length-1; i++) {\n            if (A[i] > A[i-1] && A[i] > A[i+1]) {\n                peekList.add(i);\n                i++;\n            }\n        }\n        \n        int maxFlagCount = 0;\n        for (int i=1; i<=peekList.size(); i++) {\n            int count = 1;\n            int prevIndex = peekList.get(0);\n            \n            for (int j=1; j<peekList.size() && count<i; j++) {\n                if (peekList.get(j) - prevIndex >= i) {\n                    count++;\n                    prevIndex = peekList.get(j);\n                }\n            }\n           \n            maxFlagCount = Math.max(maxFlagCount, count);\n        }\n        \n        return maxFlagCount;\n    }\n}\n```\n\nëŸ¬ë‹íƒ€ì„ì„ ì–´ë–»ê²Œ ì¤„ì¼ ìˆ˜ê°€ ìˆì§€ ê³ ë¯¼í–ˆëŠ”ë° ë°˜ê°ë²•(bisection)ì„ ìš”ë ‡ê²Œ ì ìš©í•˜ëŠ” ê²ƒì´êµ¬ë‚˜  \n\n[RESULT](https://app.codility.com/demo/results/trainingWFVNW5-CK2)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        List<Integer> peekList = new ArrayList<>();\n\n        for (int i=1; i<A.length-1; i++) {\n            if (A[i] > A[i-1] && A[i] > A[i+1]) {\n                peekList.add(i);\n                i++;\n            }\n        }\n        \n        int maxFlagCount = 0;\n        int start = 0;\n        int end = peekList.size();\n        \n        if (end < 2) {\n            return end;\n        }\n        \n        while (start <= end) {\n            int flag = (start + end) / 2;\n            int count = 1;\n            int prevIndex = peekList.get(0);\n            \n            for (int j=1; j<peekList.size() && count<flag; j++) {\n                if (peekList.get(j) - prevIndex >= flag) {\n                    count++;\n                    prevIndex = peekList.get(j);\n                }\n            }\n            \n            if (count == flag) {\n                start = flag + 1;\n                maxFlagCount = count;\n            } else {\n                end = flag - 1;               \n            }\n        }\n        \n        return maxFlagCount;\n    }\n}\n```\n","excerpt":"RESULT ëŸ¬ë‹íƒ€ì„ì„ ì–´ë–»ê²Œ ì¤„ì¼ ìˆ˜ê°€ ìˆì§€ ê³ ë¯¼í–ˆëŠ”ë° ë°˜ê°ë²•(bisection)ì„ ìš”ë ‡ê²Œ ì ìš©í•˜ëŠ” ê²ƒì´êµ¬ë‚˜   RESULT","fields":{"slug":"/codility-flags/"},"frontmatter":{"date":"May 15, 2018","title":"Codility - Flags","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingYDY6KG-YMR)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int N) {\n        int root = (int) Math.sqrt(N);\n        for (int i=root; i>0; i--) {\n            if (N % i == 0) {\n                return ((i + (N / i)) * 2);\n            }    \n        }\n        \n        return -1;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-min-perimeter-rectangle/"},"frontmatter":{"date":"May 10, 2018","title":"Codility - MinPerimeterRectangle","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingDEE7GM-4CJ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int N) {\n        int root = (int) Math.sqrt(N);\n        int count = 0;\n        \n        for (int i=1; i<=root; i++) {\n            if (N % i == 0) {\n                count++;\n                if (N / i != i) {\n                    count++;\n                }\n            }\n        }\n        \n        return count;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-count-factors/"},"frontmatter":{"date":"May 10, 2018","title":"Codility - CountFactors","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingQV4HHP-G32)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int maxSlice = A[0];\n        int maxSliceSum = A[0];\n        for (int i=1; i<A.length; i++) {\n            maxSlice = Math.max(A[i], maxSlice + A[i]);\n            maxSliceSum = Math.max(maxSliceSum, maxSlice);\n        }\n        \n        return maxSliceSum;       \n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-max-slice-sum/"},"frontmatter":{"date":"May 07, 2018","title":"Codility - MaxSliceSum","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingPEU2EU-78G)  \n\n\n``` java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int maxProfit = 0;\n        int minShareSlice = Integer.MAX_VALUE;\n\n        for (int i=0; i<A.length; i++) {\n            minShareSlice = Math.min(minShareSlice, A[i]);\n            maxProfit = Math.max(maxProfit, A[i] - minShareSlice);\n        }\n\n        return maxProfit;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-max-profit/"},"frontmatter":{"date":"Apr 20, 2018","title":"Codility - MaxProfit","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingJ7MRMR-HDC)\n\nê° ìœ„ì¹˜ë¥¼ ê²½ê³„ë¡œ ë¯¸ë¦¬ êµ¬í•´ë†“ì€ ì „ê³¼ í›„ì˜ ìµœëŒ€ê°’ì˜ ë¶€ë¶„ì„ ë”í•´ ê·¸ ì¤‘ì—ì„œì˜ ìµœëŒ€ê°’ì„ êµ¬í•˜ëŠ” ë¡œì§.  \n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int[] fowardMaxSum = new int[A.length];\n        int[] backwardMaxSum = new int[A.length];\n        int maxSum = 0;\n        \n        for (int i=1; i<A.length-1; i++) {\n            fowardMaxSum[i] = Math.max(fowardMaxSum[i-1] + A[i], 0);\n        }\n        \n        for (int i=A.length-2; i>1; i--) {\n            backwardMaxSum[i] = Math.max(backwardMaxSum[i+1] + A[i], 0);\n        }\n        \n        for (int i=1; i<A.length-1; i++) {\n            maxSum = Math.max(maxSum, fowardMaxSum[i-1] + backwardMaxSum[i+1]);\n        }\n        \n        return maxSum;\n    }\n}\n```\n","excerpt":"RESULT ê° ìœ„ì¹˜ë¥¼ ê²½ê³„ë¡œ ë¯¸ë¦¬ êµ¬í•´ë†“ì€ ì „ê³¼ í›„ì˜ ìµœëŒ€ê°’ì˜ ë¶€ë¶„ì„ ë”í•´ ê·¸ ì¤‘ì—ì„œì˜ ìµœëŒ€ê°’ì„ êµ¬í•˜ëŠ” ë¡œì§.","fields":{"slug":"/codility-max-double-slice-sum/"},"frontmatter":{"date":"Apr 16, 2018","title":"Codility - MaxDoubleSliceSum","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"![](../src/images/harnessing-hibernate.jpeg)  \n\nìë°” ORMì„ ì±…ìœ¼ë¡œ ê³µë¶€í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì€ ëŠ˜ í•˜ê³  ìˆì—ˆëŠ”ë° ë§ˆì¹¨ íšŒì‚¬ì— êµ´ëŸ¬ë‹¤ë‹ˆë˜(?) ì±…ì´ ìˆì–´ì„œ ë³´ê¸° ì‹œì‘í–ˆë‹¤.  \n\nì±…ì˜ ë‚´ìš©ì€ XMLì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ Artist, Track, Albumë“±ì˜ ê°ì²´ë¥¼ ëª¨ë¸ë§ì„ í•˜ê³  HQLê³¼ í¬ë¦¬í…Œë¦¬ì•„ ì¿¼ë¦¬, ê·¸ë¦¬ê³  ìŠ¤í”„ë§ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì†Œê°œí•˜ê³  ìˆë‹¤.\nì„¤ì • ë°©ë²• ë¶€í„° ì§ì ‘ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ì½”ë“œê°€ ë§ì•„ ì…ë¬¸ìš©ìœ¼ë¡œ ì í•©í•  ë“¯í•œ ì„œì ì´ë‹¤. \nì‚¬ì‹¤ ë‚˜ì˜ ê²½ìš°ëŠ” ì´ ì±…ë§Œìœ¼ë¡œëŠ” í•˜ì´ë²„ë„¤ì´íŠ¸ì—ë¥¼ ì˜ ì´í•´í•  ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì¡°ë§Œê°„ ì±… í•œê¶Œì„ ë” ë´ì•¼ í•  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.\n\nì˜ˆì œë¥¼ ë”°ë¼í•˜ë‹¤ê°€ LazyInitilizeExceptionì´ ë°œìƒí–ˆê³  í•´ê²°ì„ ìœ„í•´ ê²€ìƒ‰í•˜ë‹¤ OSIV(Open Session In View)ì— ëŒ€í•´ì„œë„ ì•Œê²Œ ë˜ì—ˆê³  ì•ˆí‹°íŒ¨í„´ì´ë‹ˆ í•˜ëŠ” ë…¼ìŸê³¼ ë”ë¶ˆì–´\nìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ì–´ ìˆë‹¤ëŠ” ë° ì™œ ë‚˜ëŠ”ì§€ë¥¼ ì°¾ê²Œ ë˜ì—ˆë‹¤.(ì—ëŸ¬ëŠ” lombockì—ì„œ ìƒì„±ëœ toString()ìœ¼ë¡œ ì¸í•˜ì—¬ ë°œìƒí–ˆì—ˆë‹¤.)\n\nìƒˆë¡œìš´ ê¸°ìˆ ì—ëŒ€í•œ ì±…ì´ë‚˜ ê¸€ì„ ì ‘í• ë•Œë§ˆë‹¤ ëŠë¼ëŠ” ê±°ì§€ë§Œ(ì´ë¯¸ íšŒìë˜ëŠ” ê¸°ìˆ ì¼ ìˆ˜ë¡ ë§ì´) ë‚˜ëŠ” ì´ê±¸ ì–¸ì œ ì¨ë³´ë‚˜ í•˜ëŠ” ìƒê°ì´ ë“¤ ë•Œê°€ ë§ë‹¤. í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ì˜ˆì „ ë¶€í„° í•œë²ˆ ì˜ ì‚¬ìš©í•´ ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê°ì„ ê°€ì§€ê³  ìˆì—ˆëŠ”ë° ì•„ì£¼ ë‹¤í–‰ìŠ¤ëŸ½ê²Œë„ ì‹ ê·œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ì¼ì´ ìƒê¸¸ ê²ƒ ê°™ì•„ ë§ì´ ë‹¤ë¤„ ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.  \n","excerpt":"ìë°” ORMì„ ì±…ìœ¼ë¡œ ê³µë¶€í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì€ ëŠ˜ í•˜ê³  ìˆì—ˆëŠ”ë° ë§ˆì¹¨ íšŒì‚¬ì— êµ´ëŸ¬ë‹¤ë‹ˆë˜(?) ì±…ì´ ìˆì–´ì„œ ë³´ê¸° ì‹œì‘í–ˆë‹¤.   ì±…ì˜ ë‚´ìš©ì€ XMLì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ Artist, Track, Albumë“±ì˜ ê°ì²´ë¥¼ ëª¨ë¸ë§ì„ í•˜ê³  HQLâ€¦","fields":{"slug":"/book-harnessing-hibernate/"},"frontmatter":{"date":"Apr 05, 2018","title":"í•˜ì´ë²„ë„¤ì´íŠ¸ í”„ë¡œê·¸ë˜ë°","tags":["book"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingVU4J47-PMR)\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Map<Integer, Integer> firstCountMap = new HashMap<>();\n        Map<Integer, Integer> secondCountMap = new HashMap<>();\n        int firstLeader = A[0];\n        int secondLeader = A[0];\n        int count = 0;\n        \n        for (int a : A) {\n            secondCountMap.put(a, secondCountMap.getOrDefault(a, 0) + 1);\n            if (secondCountMap.get(secondLeader) < secondCountMap.get(a)) {\n                secondLeader = a;\n            }\n        }\n        \n        for (int i=0; i<A.length-1; i++) {\n            firstCountMap.put(A[i], firstCountMap.getOrDefault(A[i], 0) + 1);\n            secondCountMap.put(A[i], secondCountMap.get(A[i]) - 1);\n            \n            if (firstCountMap.get(firstLeader) < firstCountMap.get(A[i])) {\n                firstLeader = A[i];                 \n            }\n            \n            if (secondCountMap.get(secondLeader) < secondCountMap.get(A[i])) {\n                secondLeader = A[i];      \n            }\n            \n            if (firstCountMap.get(firstLeader) > (i + 1) / 2.0 && secondCountMap.get(secondLeader) > (A.length - i - 1) / 2.0 && firstLeader == secondLeader) {\n                count++;    \n            }\n        }\n        \n        \n        return count;\n    }\n}\n```\n\nì²«ë²ˆì§¸ ë°©ë²•ëŠ” Mapì„ ì´ìš©í•´ ìˆ«ìê°€ ë‚˜íƒ€ë‚˜ëŠ” ê°¯ìˆ˜ë¥¼ ì¹´ìš´íŒ…í•˜ì—¬ Leaderê°’ì„ ê³„ì‚°í•˜ê³   \në‘ë²ˆì¨° ë°©ë²•ì€ Leaderê°€ ë˜ëŠ” ìˆ˜ëŠ” ë‹¤ë¥¸ ìˆ˜ë“¤ ë³´ë‹¤ ë°˜ ë„˜ê²Œ ë‚˜íƒ€ë‚œë‹¤ëŠ” ì ì„ ì´ìš©í•´ì„œ Leaderê°’ì„ ê³„ì‚° í•˜ëŠ” ë°©ì‹ì´ë‹¤.  \nê·¸ë¦¬ê³  ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆˆ ê²½ìš°ì—ë„ ì „ì²´ì˜ Leaderê°’ê³¼ ë™ì¼í•˜ë‹¤ëŠ” ê²ƒì„ ì´ìš©í•œë‹¤.  \n\në‚´ ìƒê°ìœ¼ë¡œëŠ” Mapê³¼ ì¼ë°˜ ê³„ì‚°ì‹ìœ¼ë¡œì˜ ì‹œê°„ ë³µì¡ë„ê°€ $$O(n)$$ ìœ¼ë¡œ ë™ì¼ í•  ê²ƒ ê°™ì•˜ëŠ”ë° ì•„ë‹ˆì˜€ë‹¤.  \në‹¤ë¥¸ ì–¸ì–´ì˜ ì†”ë£¨ì…˜ì—ì„œëŠ” ì´ëŸ° ë°©ë²•ìœ¼ë¡œ í’€ì—ˆì„ ë•Œ í†µê³¼í•˜ëŠ” ê²ƒ ê°™ì€ë°... Â \nì•„ë¬´íŠ¼ ìë£Œë¥¼ ì°¸ê³ í•˜ì—¬ í’€ì—ˆê¸° ë•Œë¬¸ì— ë‚˜ì¤‘ì— ë‹¤ì‹œ í’€ë©´ í’€ ìˆ˜ ìˆì„ê¹Œ ì‹¶ë‹¤. Â \nì–¸ì  ê°€ëŠ” ê¼­ materialì„ ë²ˆì—­í•˜ë©´ì„œ ì°¨ê·¼ì°¨ê·¼ ë‹¤ì‹œ ë´ì•¼ê² ë‹¤.\n\n[RESULT](https://app.codility.com/demo/results/trainingVU4J47-PMR)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int count = 0;\n        int size = 0;\n        int value = 0;\n        for (int a : A) {\n            if (size == 0) {\n                value = a;\n                size++;\n            } else if (value == a) {\n                size++;\n            } else {\n                size--;\n            }\n        }\n        \n        int leaderCount = 0;\n        if (size == 0) {\n            return 0;\n        } else {\n            for (int a : A) {\n                if (value == a) {\n                    leaderCount++;\n                }\n            }\n        }\n        \n        int firstLeaderCount = 0;\n        for (int i=0; i<A.length; i++) {\n            if (value == A[i]) {\n                firstLeaderCount++;    \n            }\n            \n            if (firstLeaderCount > (i + 1) / 2.0 && leaderCount - firstLeaderCount > (A.length - i - 1) / 2.0) {\n                count++;\n            }\n        }\n        \n        return count;\n    }\n}\n```\n","excerpt":"RESULT ì²«ë²ˆì§¸ ë°©ë²•ëŠ” Mapì„ ì´ìš©í•´ ìˆ«ìê°€ ë‚˜íƒ€ë‚˜ëŠ” ê°¯ìˆ˜ë¥¼ ì¹´ìš´íŒ…í•˜ì—¬ Leaderê°’ì„ ê³„ì‚°í•˜ê³  ë‘ë²ˆì¨° ë°©ë²•ì€ Leaderê°€ ë˜ëŠ” ìˆ˜ëŠ” ë‹¤ë¥¸ ìˆ˜ë“¤ ë³´ë‹¤ ë°˜ ë„˜ê²Œ ë‚˜íƒ€ë‚œë‹¤ëŠ” ì ì„ ì´ìš©í•´ì„œ Leaderâ€¦","fields":{"slug":"/codility-equi-leader/"},"frontmatter":{"date":"Mar 26, 2018","title":"Codility - EquiLeader","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingEPE6UZ-3VZ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Map<Integer, Integer> map = new HashMap<>();\n        int dominator = -1;\n        \n        for (int i=0; i<A.length; i++) {\n            map.put(A[i], map.getOrDefault(A[i], 0) + 1);\n            if (map.get(A[i]) > A.length / 2) {\n                dominator = i;\n                break;\n            }\n        }\n        \n        return dominator;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-dominator/"},"frontmatter":{"date":"Mar 18, 2018","title":"Codility - Dominator","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingXHPHJW-P64)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A, int[] B) {\n        Stack<Integer> upStack = new Stack<>();\n        Stack<Integer> downStack = new Stack<>();\n        \n        for (int i=0; i<A.length; i++) {\n            if (B[i] == 1) {\n                downStack.push(A[i]);\n            } else if (!downStack.isEmpty()) {\n                while (!downStack.isEmpty() && downStack.peek() < A[i]) {\n                    downStack.pop();\n                }\n                if (downStack.isEmpty()) {\n                    upStack.push(A[i]);\n                }\n                \n            } else {\n                upStack.push(A[i]);\n            }\n        }\n    \n        return upStack.size() + downStack.size();    \n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-fish/"},"frontmatter":{"date":"Mar 16, 2018","title":"Codility - Fish","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingMQQCGV-Y5A)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(String S) {\n        Stack<Character> stack = new Stack<>();\n        for (int i=0; i<S.length(); i++) {\n            if (S.charAt(i) == '(') {\n                stack.push(S.charAt(i));\n            } else if (stack.isEmpty() || '(' != stack.pop()) {\n                return 0;\n            }\n        }\n        \n        return stack.isEmpty() ? 1 : 0;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-nesting/"},"frontmatter":{"date":"Mar 16, 2018","title":"Codility - Nesting","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training989CHX-VJ9)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(String S) {\n        Stack<Character> stack = new Stack<>();\n        \n        for (char s : S.toCharArray()) {\n            if ('(' == s || '[' == s || '{' == s) {\n                stack.push(s);   \n            } else if (stack.empty()) {\n                return 0;    \n            } else {\n                char pop = stack.pop();\n                if (('(' == pop && ')' != s) ||\n                    ('[' == pop && ']' != s) ||\n                    ('{' == pop && '}' != s)\n                ) {\n                    return 0;\n                }\n            }\n        }\n        \n        return stack.empty() ? 1 : 0;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-brakets/"},"frontmatter":{"date":"Mar 07, 2018","title":"Codility - Brackets","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingETAVVP-7PG)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] H) {\n        int count = 0;\n        Stack<Integer> stack = new Stack<>();\n        \n        for (int h : H) {\n            while (!stack.empty() && stack.peek() > h) {\n                stack.pop();\n            }\n            \n            if (stack.empty() || stack.peek() != h) {\n                count++;\n            }\n            \n            stack.push(h);\n        }\n        \n        return count;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-stone-wall/"},"frontmatter":{"date":"Mar 06, 2018","title":"Codility - StoneWall","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\në‚œì´ë„ê°€ MEDIUMë§Œ ë˜ì–´ë„ ê½¤ë‚˜ ì–´ë µë‹¤. ìš°ì„  ì™„ì „ íƒìƒ‰ë¶€í„°...  \nì›ì˜ ì˜¤ë¥¸ìª½ ë³´ë‹¤ ë‹¤ë¥¸ ì›ì˜ ì™¼ìª½ì´ ê°™ê±°ë‚˜ ì‘ì„ ë•Œ êµì°¨ëœë‹¤ê³  íŒë‹¨í•œë‹¤.  \n\n[RESULT](https://app.codility.com/demo/results/trainingHWF3C6-FXM)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int count = 0;\n        for (int i=0; i<A.length-1; i++) {\n            for (int j=i+1; j<A.length; j++) {\n                if ((long) i + A[i] >= j - A[j]) {\n                    count++;    \n                }           \n            }\n        }\n        \n        return count;\n    }\n}\n```\n\nì—¬ëŸ¬ ì†”ë£¨ì…˜ë“¤ì´ ìˆì—ˆëŠ”ë° ê°œì¸ì ìœ¼ë¡œëŠ” ì´ ë°©ë²•ì´ ê°€ì¥ ì§ê´€ì ì¸ ê²ƒ ê°™ì•˜ë‹¤.  \nì™¼ìª½ ì¢Œí‘œë¥¼ ì •ë ¬ í•œ ë’¤ì— ì˜¤ë¥¸ìª½ ì¢Œí‘œë³´ë‹¤ ì‘ì€ ì¢Œí‘œëŠ” êµì°¨í•œë‹¤ê³  íŒë‹¨í•˜ëŠ” ë°©ë²•ì´ë‹¤.  \nì˜¤ë¥¸ìª½ ì¢Œí‘œë³´ë‹¤ ì‘ì€ ì¢Œí‘œë¥¼ ì°¾ì„ ë•Œ ì´ì§„íƒìƒ‰ìœ¼ë¡œ ì°¾ëŠ”ë‹¤.  \nì •ë ¬í•  ë•Œ Stream APIë¡œ ì •ë ¬í–ˆì—ˆëŠ”ë° ì—­ì‹œë‚˜ ì†ë„ê°€ ì•ˆë‚˜ì˜¨ë‹¤.  \n\n[RESULT](https://app.codility.com/demo/results/trainingDKEAPS-VDF)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        long[][] interval = new long[A.length][2];\n        for (int i=0; i<A.length; i++) {\n            interval[i][0] = i - A[i]; \n            interval[i][1] = (long) i + A[i];\n        }\n        \n        Arrays.sort(interval, new Comparator<long[]>() {\n            public int compare(long[] a, long[] b) {\n                return Long.compare(a[0],b[0]);\n            }\n        });\n        \n        int count = 0;\n        for (int i=0; i<A.length; i++) {\n            long target = interval[i][1];\n            int start = i + 1;\n            int end = A.length - 1;\n            \n            while (start <= end) {\n                int mid = (start + end) / 2;\n                if (interval[mid][0] <= target) {\n                    count += mid - start + 1;\n                    start = mid + 1;\n                } else {\n                   end = mid - 1;\n                }\n            }\n            \n            if (count > 10000000) {\n                return -1;\n            }\n        }\n        \n        return count;\n    }\n}\n```\n","excerpt":"ë‚œì´ë„ê°€ MEDIUMë§Œ ë˜ì–´ë„ ê½¤ë‚˜ ì–´ë µë‹¤. ìš°ì„  ì™„ì „ íƒìƒ‰ë¶€í„°... ì›ì˜ ì˜¤ë¥¸ìª½ ë³´ë‹¤ ë‹¤ë¥¸ ì›ì˜ ì™¼ìª½ì´ ê°™ê±°ë‚˜ ì‘ì„ ë•Œ êµì°¨ëœë‹¤ê³  íŒë‹¨í•œë‹¤.   RESULTâ€¦","fields":{"slug":"/codility-number-of-disc-intersections/"},"frontmatter":{"date":"Mar 06, 2018","title":"Codility - NumberOfDiscIntersections","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training4QKGBE-GMY)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Arrays.sort(A);\n        \n        int N = A.length;\n        int answer1 = A[0] * A[1] * A[N - 1];\n        int answer2 = A[N - 1] * A[N - 2] * A[N - 3];\n        return answer1 > answer2 ? answer1 : answer2;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-max-product-of-three/"},"frontmatter":{"date":"Mar 03, 2018","title":"Codility - MaxProductOfThree","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingJNA3ST-S9F)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Arrays.sort(A);\n        for (int i=0; i<A.length-2; i++) {\n            int P = A[i];\n            int Q = A[i + 1];\n            int R = A[i + 2];\n            \n            if ((long) P + Q > R && (long) Q + R > P && (long) R + P > Q) {\n                return 1;\n            }        \n        }\n        \n        return 0;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-triangle/"},"frontmatter":{"date":"Mar 02, 2018","title":"Codility - Triangle","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingWW5HZ7-ACQ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Set<Integer> set = new HashSet<>();\n        for (int a : A) {\n            set.add(a);\n        }\n        \n        return set.size();\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-distinct/"},"frontmatter":{"date":"Mar 02, 2018","title":"Codility - Distinct","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingJYE6E4-7KY)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(String S, int[] P, int[] Q) {\n        int[] answer = new int[P.length];\n        \n        for (int i = 0; i < P.length; i++) {\n            int minFactor = 4;\n            for (int j = P[i]; j <= Q[i]; j++) {\n                int factor = getImpactorFactor(S.charAt(j));\n                if (minFactor > factor) {\n                    minFactor = factor;\n                }\n            }\n            \n            answer[i] = minFactor;\n        }\n        \n        return answer;\n    }\n    \n    private int getImpactorFactor(char c) {\n        switch (c) {\n            case 'A':\n                return 1;\n            case 'C':\n                return 2;\n            case 'G':\n                return 3;\n            case 'T':\n                return 4;\n        }\n        \n        return -1;\n    }\n}\n```\n\në³´í†µì˜ ë°©ë²•ìœ¼ë¡œ ë£¨í”„ë¥¼ ì‚¬ìš©í•˜ì—¬ $$O(N * M)$$ìœ¼ë¡œ í•´ê²°í•˜ëŠ” ë°©ë²•.  \nì•„ë˜ëŠ” ê° ë¬¸ìì—´ì—ì„œ ë‚˜íƒ€ë‚¸ ê°¯ìˆ˜ë¥¼ ì„¸ì–´ ê° ë¬¸ìì—ì„œì˜ ë¬¸ì ê°¯ìˆ˜ ìŠ¤ëƒ…ìƒ·ì„ ê¸°ë¡í•œë‹¤.  \nê·¸ë¦¬ê³  ë¬¸ì œì˜ ì‹œì‘, ì¢…ë£Œ ì¸ë±ìŠ¤ì˜ ìŠ¤ëƒ…ìƒ·ì˜ ê°’ì´ ë‚®ì€ ìˆœì„œë¡œ ë¬¸ì ê°¯ìˆ˜ë¥¼ ë¹¼ì„œ(í•´ë”© êµ¬ê°„ì— ë¬¸ìê°€ ë‚˜íƒ€ë‚¬ë‹¤ë©´) ê²°ê³¼ë¥¼ êµ¬í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n[RESULT](https://app.codility.com/demo/results/trainingQAMQWH-G7G)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(String S, int[] P, int[] Q) {\n        int[] answer = new int [P.length];\n        int[][] memo = new int[5][S.length() + 1];\n        \n        for (int i = 1; i <= S.length(); i++) {\n            for (int j = 1; j <= 4; j++) {\n                memo[j][i] = memo[j][i - 1];\n            }\n            \n            memo[getImpactorFactor(S.charAt(i - 1))][i]++;\n        }\n        \n        for (int i = 0; i < P.length; i++) {\n            for (int j = 1; j <= 4; j++) {\n                if (memo[j][Q[i] + 1] - memo[j][P[i]] > 0) {\n                    answer[i] = j;\n                    break;\n                }\n            }\n        }\n        \n        return answer;\n    }\n    \n    private int getImpactorFactor(char c) {\n        switch (c) {\n            case 'A':\n                return 1;\n            case 'C':\n                return 2;\n            case 'G':\n                return 3;\n            case 'T':\n                return 4;\n        }\n        \n        return -1;\n    }\n}\n```\n","excerpt":"RESULTâ€¦","fields":{"slug":"/codility-genomic-range-query/"},"frontmatter":{"date":"Mar 02, 2018","title":"Codility - GenomicRangeQuery","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training7V4U6S-Z73)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int count = 0;\n        int zeroCount = 0;\n        for (int a : A) {\n            if (a == 0) {\n                zeroCount++;\n            } else {\n                count += zeroCount;\n            }\n            \n            if (count > 1000000000) {\n                return -1;\n            }\n        }\n        \n        return count;\n    }\n}\n```\n\nì‹œë»˜ê±´ í¼í¬ë¨¼ìŠ¤ì˜ ì ìˆ˜ë¥¼ ë³´ê³  ì—¬ê¸°ì„œ $$O(N^2)$$ì´ ì•„ë‹ˆê²Œ ì–´ë–»ê²Œ ì§œì•¼í•˜ëŠ”ì§€ ë‹µì´ ì•ˆ ë‚˜ì™€ ê²°êµ­ ê²€ìƒ‰...  \nê²°ë¡ ì€ ì „ì²´ 2, 3ê°œì˜ ë¶€ë¶„ì§‘í•©ì˜ í‰ê· ì´ ì „ì²´ì˜ í‰ê· ë³´ë‹¤ ì‘ë‹¤ëŠ” ê²ƒì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆì—ˆë‹¤.\n\n[RESULT](https://app.codility.com/demo/results/training885A39-SZN)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        float minAvg = Integer.MAX_VALUE;\n        int minStart = 0;\n        \n        for (int i = 0; i < A.length - 1; i++) {\n            int sliceSum = A[i];\n            for (int j = i + 1; j < Math.min(i + 3, A.length); j++) {\n                sliceSum += A[j];\n                float sliceAvg = (float) sliceSum / (j - i + 1);\n                \n                if (minAvg > sliceAvg) {\n                    minAvg = sliceAvg;\n                    minStart = i;\n                }        \n            }\n        }\n        \n        return minStart;\n    }\n}\n```\n","excerpt":"RESULT ì‹œë»˜ê±´ í¼í¬ë¨¼ìŠ¤ì˜ ì ìˆ˜ë¥¼ ë³´ê³  ì—¬ê¸°ì„œ ì´ ì•„ë‹ˆê²Œ ì–´ë–»ê²Œ ì§œì•¼í•˜ëŠ”ì§€ ë‹µì´ ì•ˆ ë‚˜ì™€ ê²°êµ­ ê²€ìƒ‰... ê²°ë¡ ì€ ì „ì²´ 2, 3ê°œì˜ ë¶€ë¶„ì§‘í•©ì˜ í‰ê· ì´ ì „ì²´ì˜ í‰ê· ë³´ë‹¤ ì‘ë‹¤ëŠ” ê²ƒì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆì—ˆë‹¤. RESULT","fields":{"slug":"/codility-min-avg-two-slice/"},"frontmatter":{"date":"Feb 28, 2018","title":"Codility - MinAvgTwoSlice","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingK4JVNG-YNQ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        int count = 0;\n        int zeroCount = 0;\n        for (int a : A) {\n            if (a == 0) {\n                zeroCount++;\n            } else {\n                count += zeroCount;\n            }\n            \n            if (count > 1000000000) {\n                return -1;\n            }\n        }\n        \n        return count;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-passing-cars/"},"frontmatter":{"date":"Feb 27, 2018","title":"Codility - PassingCars","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingTF9UCU-JUZ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int A, int B, int K) {\n        if (A > K) {\n            A = A + A % K;\n        } else if (K < B  && A % K != 0) {\n            A = K;\n        }\n        \n        int r = (B - A) / K;\n        r = A % K == 0 ? r + 1 : r;\n        return r;\n    }\n}\n```\n\nAë³´ë‹¤ í° Kë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ëŠ” ìˆ˜ë¥¼ ì°¾ê³  ê·¸ ìˆ˜ì™€ Bì‚¬ì´ì˜ ìˆ˜ë¥¼ ì°¾ëŠ” ì „ëµì„ ì‚¬ìš©í–ˆë‹¤.  \nì´ê²ƒë„ ì¡°ê±´ì„ ì°¾ëŠë¼ ê½¤ë‚˜ ê³ ìƒí–ˆëŠ”ë° í’€ì´ë¥¼ ë³´ê³ ëŠ” ë¨¸ë¦¬ì˜ í•œê³„ë¥¼ í†µë ¬íˆ ëŠê¼ˆë‹¤...\n\n[RESULT](https://app.codility.com/demo/results/trainingUBPJ9P-PZ2)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int A, int B, int K) {\n        int r = (B / K) + 1;\n        if (A != 0) {\n            r -= (A - 1) / K + 1;\n        }\n        \n        return r;\n    }\n}\n```\n","excerpt":"RESULT Aë³´ë‹¤ í° Kë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ëŠ” ìˆ˜ë¥¼ ì°¾ê³  ê·¸ ìˆ˜ì™€ Bì‚¬ì´ì˜ ìˆ˜ë¥¼ ì°¾ëŠ” ì „ëµì„ ì‚¬ìš©í–ˆë‹¤. ì´ê²ƒë„ ì¡°ê±´ì„ ì°¾ëŠë¼ ê½¤ë‚˜ ê³ ìƒí–ˆëŠ”ë° í’€ì´ë¥¼ ë³´ê³ ëŠ” ë¨¸ë¦¬ì˜ í•œê³„ë¥¼ í†µë ¬íˆ ëŠê¼ˆë‹¤... RESULT","fields":{"slug":"/codility-count-div/"},"frontmatter":{"date":"Feb 26, 2018","title":"Codility - CountDiv","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingRW92U4-VB2)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(int N, int[] A) {\n        int[] counter = new int[N];\n        int max = 0;\n        int maxCountVal = 0;\n        \n        for (int a : A) {\n            if (a <= N) {\n                a--;\n                if (counter[a] < maxCountVal) {\n                    counter[a] = maxCountVal;\n                }\n                \n                counter[a]++;   \n                \n                if (max < counter[a]) {\n                    max = counter[a];\n                }\n            } else {\n                maxCountVal = max;\n            }\n        }\n        \n        for (int i = 0; i < counter.length; i++) {\n            if (counter[i] < maxCountVal) {\n                counter[i] = maxCountVal;\n            }\n        }\n        \n        return counter;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-max-counters/"},"frontmatter":{"date":"Feb 23, 2018","title":"Codility - Max Counters","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training363E4W-TMB)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int X, int[] A) {\n        Set<Integer> used = new HashSet<>();\n        int sum = X * (X + 1) / 2;\n        \n        for (int i=0; i<A.length; i++) {\n            if (!used.contains(A[i])) {\n                sum -= A[i];\n                if (sum == 0) {\n                    return i; \n                }\n            }\n            \n            used.add(A[i]);\n        }\n        \n        return -1;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-frog-river-one/"},"frontmatter":{"date":"Feb 23, 2018","title":"Codility - FrogRiverOne","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingJ63MTC-SEJ)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        boolean[] array = new boolean[A.length + 1];\n        for (int a : A) {\n            if (a > 0 && a <= A.length) {\n                array[a] = true;\n            }\n        }\n        \n        for (int i = 1; i < array.length; i++) {\n            if (!array[i]) {\n                return i;\n            }\n        }\n        \n        return array.length;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-missing-integer/"},"frontmatter":{"date":"Feb 22, 2018","title":"Codility - Missing Integer","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingAXMVME-255)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Set<Integer> set = new HashSet<>();\n        for (int a : A) {\n            set.add(a);\n        }\n        \n        for (int i = 1; i<=A.length; i++) {\n            if (!set.contains(i)) {\n                return 0;\n            }\n        }\n        \n        return 1;\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-perm-check/"},"frontmatter":{"date":"Feb 21, 2018","title":"Codility - PermCheck","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingN6HX3N-84Y)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int X, int Y, int D) {\n        int count = (Y - X) / D;\n        if ((Y - X) % D > 0) {\n            count++;   \n        }\n        \n        return count;\n    }\n}\n```\n\në‚´ê°€ ì™œ êµ³ì´ ì´ë ‡ê²Œ ì§°ì„ê¹Œ?\n\n[RESULT](https://app.codility.com/demo/results/trainingEJQFDG-EPU/)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int X, int Y, int D) {\n        return (int) Math.ceil((Y - X) / (double) D);\n    }\n}\n```\n","excerpt":"RESULT ë‚´ê°€ ì™œ êµ³ì´ ì´ë ‡ê²Œ ì§°ì„ê¹Œ? RESULT","fields":{"slug":"/codility-frog-jmp/"},"frontmatter":{"date":"Feb 21, 2018","title":"Codility - FrogJmp","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training3AHGSD-NMF)  \n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(int[] A, int K) {\n        while (K-- > 0) {\n            A = shift(A);            \n        }\n        \n        return A;\n    }\n    \n    private int[] shift(int[] A) {\n        if (A.length > 0) {\n            int last = A[A.length - 1];\n            for (int i = A.length - 1; i > 0; i--) {\n                A[i] = A[i-1];\n            }\n            \n            A[0] = last;\n        }\n        \n        return A;\n    }\n}\n```\n  \nì´ëŸ° ì‹ ë¬˜í•œ ë°©ë²•ì´...!\n  \n[RESULT](https://app.codility.com/demo/results/trainingQGX4PB-JGY)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int[] solution(int[] A, int K) {\n        int[] B = new int[A.length];\n        for (int i = 0; i < A.length; i++) {\n            B[(i + K) % A.length] = A[i];\n        }\n        \n        return B;\n    }\n}\n```\n","excerpt":"RESULT   ì´ëŸ° ì‹ ë¬˜í•œ ë°©ë²•ì´...! RESULT","fields":{"slug":"/codility-cyclic-rotation/"},"frontmatter":{"date":"Feb 21, 2018","title":"Codility - CyclicRotation","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/trainingRVBEZW-857)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        boolean[] array = new boolean[100002];\n        for (int a : A) {\n            array[a] = true;\n        }\n        \n        for (int i = 1; i <= array.length; i++) {\n            if (!array[i]) {\n                return i;   \n            }\n        }\n        \n        return 100001;   \n    }\n}\n```\n\në¬¸ì œë¥¼ ì˜ëª» ì½ì–´ ë°°ì—´ í¬ê¸° ì‚°ì •ì„ ì˜ëª»í–ˆë‹¤.\n\n[RESULT](https://app.codility.com/demo/results/training9HAYQ2-JDV)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        boolean[] array = new boolean[A.length + 2];\n        for (int a : A) {\n            array[a] = true;\n        }\n        \n        for (int i = 1; i <= array.length; i++) {\n            if (!array[i]) {\n                return i;   \n            }\n        }\n        \n        return 100001;   \n    }\n}\n```\n\në‹¤ë¥¸ í’€ì´ë¥¼ ë³´ì§€ ì•Šì•˜ë‹¤ë©´ ìƒê°í•´ ë‚¼ ìˆ˜ ìˆì—ˆì„ê¹Œ?\n\n[RESULT](https://app.codility.com/demo/results/trainingESVKRT-VN6)\n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        long sum = (long) (A.length + 1) * (A.length + 2) / 2;\n        for (int a : A) {\n            sum -= a;\n        }\n        \n        return (int) sum;   \n    }\n}\n```\n","excerpt":"RESULT ë¬¸ì œë¥¼ ì˜ëª» ì½ì–´ ë°°ì—´ í¬ê¸° ì‚°ì •ì„ ì˜ëª»í–ˆë‹¤. RESULT ë‹¤ë¥¸ í’€ì´ë¥¼ ë³´ì§€ ì•Šì•˜ë‹¤ë©´ ìƒê°í•´ ë‚¼ ìˆ˜ ìˆì—ˆì„ê¹Œ? RESULT","fields":{"slug":"/codility-perm-missing-elem/"},"frontmatter":{"date":"Feb 21, 2018","title":"Codility - PermMissingElem","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n[RESULT](https://app.codility.com/demo/results/training4F8KB5-R7G)  \n\n```java\nimport java.util.*;\n\nclass Solution {\n    public int solution(int[] A) {\n        Set<Integer> set = new HashSet<>();\n        for (int a : A) {\n            if (set.contains(a)) {\n                set.remove(a);\n            } else {\n                set.add(a);\n            }\n        }\n        \n        return (int) set.toArray()[0];\n    }\n}\n```\n","excerpt":"RESULT","fields":{"slug":"/codility-odd-occurrences-in-array/"},"frontmatter":{"date":"Feb 20, 2018","title":"Codility - OddOccurrencesInArray","tags":["codility"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n&nbsp;&nbsp;ì˜ˆì „ì— ì‘ì—…í–ˆë˜ ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì •ë¦¬í•˜ë©´ì„œ (ì—­ì‹œë‚˜ ì™œ í•˜ê³  ìˆë‚˜ í•˜ëŠ” ìê´´ê°ì´ ë“¤ì§€ë§Œ) ê·¸ ë•Œ ìƒê°í•˜ë©´ì„œ ëª‡ ì ì ì–´ë³¸ë‹¤.  \n\n&nbsp;&nbsp;ì²« íšŒì‚¬ì— ì…ì‚¬í•˜ê³  3ê°œì›” ì •ë„ ìˆ˜ìŠµ ê¸°ê°„ì´ ëë‚˜ê³  ì˜€ë‚˜... ëŠë‹·ì—†ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œ TFë¡œ ë°œë ¹(?) ë˜ê²Œ ëœë‹¤. ê·¸ë¦¬ê³  ê³¼ì¥ ì¢€ ë³´íƒœë©´ ë‚´ ì¸ìƒì€ ê·¸ë ‡ê²Œ ë°”ë€Œê²Œ ë˜ì—ˆë‹¤. ì „ì— ì‹ ì…ì‚¬ì›ë“¤ ëŒ€ìƒìœ¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°œë°œë¶€ì¥ì´ ìŠ¤í„°ë””ë¥¼ ì‹œí‚¨ ì ì´ ìˆëŠ”ë° ê·¸ê²ƒì´ ì „ì¡°ì˜€ë˜ ê±° ê°™ê³  ê·¸ì¤‘ ë‚´ê°€ ë½‘íˆê²Œ ë˜ì—ˆì—ˆë‹¤. ê·¸ë•Œê°€ 2012ë…„ë„ì˜€ìœ¼ë‹ˆê¹Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì£¼ê°€ê°€ ì¹˜ì†Ÿë˜ ë•Œì˜€ì„ ê²ƒì´ê³  ë­”ê°€ë¥¼ í•´ë³´ê³  ì‹¶ìœ¼ì…¨ë˜ ê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤. ì—¬í•˜íŠ¼ TF êµ¬ì„±ì›ì€ ë‚˜ í¬í•¨ ì£¼ë‹ˆì–´ 2ëª…, ì‹œë‹ˆì–´ 1ëª…, ë§ˆí¬ì—… ë‹´ë‹¹ 1ëª…, ì´ê´„ 1ëª… ì´ 5ëª…ì´ì—ˆê³  ì²˜ìŒ ì·¨ì§€ëŠ” ì—…ë¬´ ì˜¤ë²„í—¤ë“œê°€ ë§ˆí¬ì—…ì—ì„œ í•­ìƒ ê±¸ë ¤ ê°œë°œì´ ëŠ¦ì–´ì§€ë‹ˆ ë¹„ ê°œë°œìë“¤ë„ HTMLë§Œ ê°€ì§€ê³  í˜ì´ì§€ êµ¬ì„±ì„ í•  ìˆ˜ ìˆê²Œ í•´ë³´ìëŠ” ê²ƒì´ì—ˆë‹¤. ì·¨ì§€ëŠ” ë‚˜ì˜ì§€ ì•Šì•˜ë‹¤ê³  ìƒê°í•œë‹¤. ì·¨ì§€ë§Œ...\n\n&nbsp;&nbsp;ê²°ë¡ ë¶€í„° ì–˜ê¸°í•˜ìë©´ ì·¨ì§€ì™€ëŠ” ë‹¤ë¥´ê²Œ ì‚¬ìš©ë˜ì—ˆë‹¤. ì‹œì—°ë„ ì—¬ëŸ¬ ë²ˆ í–ˆì—ˆì§€ë§Œ, ê¸°íšìë‚˜ ë””ìì´ë„ˆê°€ ì›í•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥´ë‹¤ëŠ” ìƒê°ì´ ë§ì´ ë“¤ì—ˆë‹¤. (ê·¸ë“¤ì€ ëŒ€ë¶€ë¶„ HTMLì¡°ì°¨ ë§Œì§€ê³  ì‹¶ì–´í•˜ì§€ ì•ŠëŠ”ë‹¤.)ë¹„ ê°œë°œìë“¤ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜€ì§€ë§Œ, ê°œë°œìë“¤ì´(ì£¼ë¡œ ë‚´ê°€) ì‚¬ìš©í–ˆë‹¤. ê¸°ì¡´ í˜ì´ì§€ëŠ” ëŒ€ë¶€ë¶„ ì •ì  í˜ì´ì§€ì˜€ëŠ”ë° ì •ì ìœ¼ë¡œ ì„œë¹„ìŠ¤í•˜ê¸° ê¹Œë‹¤ë¡œìš´ í˜ì´ì§€ë“¤, ì˜ˆë¥¼ ë“¤ë©´, ê°œí¸ë  ë•Œ ê¸°ì¡´ ìŠ¤íƒ€ì¼ë¡œ ì„œë¹„ìŠ¤ë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê³¼ê±° ê¸°ì‚¬ í˜ì´ì§€ë“¤ì— ì‚¬ìš©ë˜ì—ˆê³ , íƒœë¸”ë¦¿, ëª¨ë°”ì¼ ì•±ì˜ ì›¹ ë·°ì— ì‚¬ìš©ë˜ì—ˆë‹¤. (ê·¸ë•Œ ì´ê´„ ë¶€ì¥ë‹˜ì´ ì†Œê·¹ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë˜ ê²ƒì— í•œì´ ë§ºí˜”ì—ˆëŠ”ì§€ ì¶”í›„ì— ì´ê±¸ ê°€ì§€ê³  ì›¹ í˜ì´ì§€ ì €ì‘ íˆ´ì„ ë§Œë“œëŠ” í”„ë¡œì íŠ¸ë¥¼ í•˜ê²Œ ëœë‹¤. ì´ê²ƒë„ í•  ì–˜ê¸°ê°€ ì°¸ ë§ì§€ë§Œ ë‹¤ìŒì—...) \n\n&nbsp;&nbsp;ê²°ë¡ ì€ ëŒ€ì¶© ì €ë ‡ê³  ê³¼ì •ì€ ì •ë§ë¡œ ìš°ì—¬ê³¡ì ˆë„ ë§ì•˜ê³ , ë‹µë‹µí•˜ê¸°ë„ í–ˆê³ , ìˆ ì´ ë§ì´ ëŠ˜ì—ˆì—ˆë‹¤. ë¬¼ë¡  ë°°ìš´ ê²ƒë„ ì°¸ ë§ë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ëŒ€í•œ ë‚˜ì˜ ì¸ì‹ì„ ì™„ì „íˆ ë°”ê¾¼ ê³„ê¸°ê°€ ë˜ì—ˆê³ , ì§€ê¸ˆì€ í”„ë¡ íŠ¸ì—”ë“œë¥¼ UI ê°œë°œ ë§ê³ ëŠ” í•  ì¼ ì—†ì–´ ì†Œí™€í•˜ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë§ˆìŒì˜ ê³ í–¥ ê°™ì€ ëŠë‚Œì´ë‹¤. ì´ë•Œ ë”ê¸€ë¼ìŠ¤ í¬ë½í¬ë“œì˜ Javascript:The Good Partsë¥¼ ì •ë§ ê°ëª… ê¹Šê²Œ ë´¤ì—ˆë‹¤. ì–¸ì–´ì˜ ì¥ì , ë‹¨ì ì„ ì‘ê°€ê°€ ëª…í™•í•œ ë…¼ì§€ë¡œ ì„¤ëª…í•˜ëŠ”ë° ì¹´íƒ€ë¥´ì‹œìŠ¤ê°€ ëŠê»´ì§ˆ ì •ë„ì˜€ë‹¤. (ê·¸ë¦¬ê³  ì–‡ë‹¤.)ê·¸ë¦¬ê³  ê°€ë””ì–¸ì´ë‚˜ ë‰´ìš•íƒ€ì„ìŠ¤ì— ê¸°ìˆ  ë¸”ë¡œê·¸ë“¤ì„ ë³´ëŠ” ê²ƒë„ ì¢‹ì•˜ê³  ê³µë¶€í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì´ ì°¸ ë§ì•˜ì—ˆë‹¤.\n\n&nbsp;&nbsp;ê²°êµ­, ë¯¸ë˜ê°€ ì—†ì„ ê²ƒ ê°™ì€ í”„ë¡œê·¸ë¨ì„ ê³„ì† ê°œë°œí•´ì•¼ í•˜ëŠ” ê²ƒì— ì§€ì³ì„œ ì´ì§í•˜ê²Œ ë˜ì—ˆê³ , ê·¸ ë•Œ TFì— ì°¸ì—¬í•œ ì‚¬ëŒë“¤ì€ ë‚˜ë¥¼ í¬í•¨í•´ì„œ ì „ë¶€ ì§€ê¸ˆì€ ìì˜ë“  íƒ€ì˜ë“  ê·¸ë§Œë‘ê±°ë‚˜ ë‹¤ë¥¸ íšŒì‚¬ì— ì¬ì§ì¤‘ì´ë‹¤. ê°€ë” ê·¸ ë•Œë¥¼ ìƒê°í•˜ë©´ ì¶”ì–µë³´ì •ì´ ë˜ëŠ”ê±´ì§€ ì•„ë ¨í•œ ëŠë‚Œì´ ë§ì´ ë“ ë‹¤. ì¡°ë§Œê°„ ê´‘í™”ë¬¸ì— ìˆ ì´ë‚˜ í•œ ì” í•˜ëŸ¬ ê°€ì•¼ê² ë‹¤.\n","excerpt":"ì˜ˆì „ì— ì‘ì—…í–ˆë˜ ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì •ë¦¬í•˜ë©´ì„œ (ì—­ì‹œë‚˜ ì™œ í•˜ê³  ìˆë‚˜ í•˜ëŠ” ìê´´ê°ì´ ë“¤ì§€ë§Œ) ê·¸ ë•Œ ìƒê°í•˜ë©´ì„œ ëª‡ ì ì ì–´ë³¸ë‹¤.   Â Â ì²« íšŒì‚¬ì— ì…ì‚¬í•˜ê³  3ê°œì›” ì •ë„ ìˆ˜ìŠµ ê¸°ê°„ì´ ëë‚˜ê³  ì˜€ë‚˜... ëŠë‹·ì—†ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œ TFâ€¦","fields":{"slug":"/memory-javascript-library/"},"frontmatter":{"date":"Feb 05, 2018","title":"ì‚¬ë‚´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ íšŒê³ ","tags":["gibberish"],"update":"Jan 01, 0001"}}},{"node":{"rawMarkdownBody":"\n~~ë¸”ë¡œê·¸ ì •ë¦¬í•˜ë‹¤ê°€ ë‹¤ì‹œ ì½ì–´ë³´ë‹ˆê¹Œ ì™œ ì´ë ‡ê²Œ ì˜¤ê·¸ë¼ë“œëƒ... ì§€ìš°ê³ ì‹¶ì§€ë§Œ ë‚¨ê²¨ë‘”ë‹¤.~~\n\n&nbsp;&nbsp;ì´ ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í•œ ì´ìœ ëŠ” ë‚˜ë¥¼ ìµœëŒ€í•œ GEEKí•œ(?) ì‚¬ëŒì²˜ëŸ¼ ë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ì„œë‹¤. ì›ë˜ ë‚˜ëŠ” ë¸”ë¡œê·¸ì— ê¸€ ì“°ëŠ” ê²ƒë„ ì •ë§ ê·€ì°®ì•„í•˜ê³  ì´ëŸ° ì§“ í•  ì‹œê°„ì— ëˆ„ì›Œì„œ TVë‚˜ ë³´ëŠ” ì‚¬ëŒì¸ë°, ì´ë ¥ì„œë¥¼ ì“°ë‹¤ê°€ í™ˆí˜ì´ì§€ë€ì„ ë¹„ì›Œë‘ê³  ì‹¶ì§€ ì•Šì•„ì„œ ë§Œë“¤ê²Œ ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ì´ë¯¸ì§€ í¬ì¥ì‘ì—…ì˜ ì¼í™˜ìœ¼ë¡œ [JSON Resume](http://jsonresume.org)ë¡œ ì´ë ¥ì„œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤. ë‚´ê°€ ì´ë ¥ì„œê¹Œì§€ ì™œ JSONìœ¼ë¡œ ì‘ì—…í•˜ê³  ìˆë‚˜í•˜ëŠ” íšŒì˜ê°ì´ ë“¤ì—ˆì§€ë§Œ ì–´ì¨Œë“  ê°„ì— í•˜ê³ ë‚˜ë‹ˆê¹Œ ë¿Œë“¯í•œ ê±´ ìˆë‹¤. í…Œë§ˆë¡œ [light-classy-responsive](https://github.com/myh1000/jsonresume-theme-light-classy-responsive) ë¼ëŠ” í…Œë§ˆë¥¼ ì¡°ê¸ˆ ë³€í˜•í•´ì„œ ì‚¬ìš©í–ˆëŠ”ë°, ë¡œì»¬ í…Œë§ˆë¡œ í¼ë¸”ë¦¬ì‹±í•˜ëŠ” ê¸°ëŠ¥ì€ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n&nbsp;&nbsp;ì„œë¥¸ ì‚´ ì¯¤ ë¶€í„°ëŠ” ë‚´ ìì‹ ì„ ì˜ íŒŒì•…í•˜ê²Œ ë˜ì–´ ë‚´ê°€ ê¾¸ì¤€íˆ ê¸€ì„ ì•ˆ ì“¸ ê²ƒ ì´ë¼ëŠ” ê²ƒì„ ëˆ„êµ¬ë³´ë‹¤ë„ ì˜ ì•ˆë‹¤. (ì‹¤ì œë¡œ ì´ íŒŒì¼ì„ ë§Œë“  ë‚ ì§œì™€ ìˆ˜ì •ë‚ ì§œê°€ ë‹¤ë¥´ë‹¤. ê·¸ë ‡ê¸° ëŒ€ë¬¸ì— ì“°ê³  ì‹¶ì—ˆë˜ ë‚´ìš©ê³¼ ì§€ê¸ˆ ì“°ê³  ì‹¶ì€ ë‚´ìš©ì´ ë‹¤ë¥´ë‹¤.) ì£¼ë¡œ ì“°ê²Œ ë  ë‚´ìš©ì€... ì˜¬í•´ëŠ” ìµœëŒ€í•œ ì±…ì„ ë§ì´ ì½ê¸°ë¡œ í•˜ì˜€ìœ¼ë‹ˆ ë…ì„œ ì¼ê¸°ë¥¼ ë§ì´ ì“°ê²Œ ë  ê²ƒ ê°™ë‹¤.\n\n","excerpt":"ë¸”ë¡œê·¸ ì •ë¦¬í•˜ë‹¤ê°€ ë‹¤ì‹œ ì½ì–´ë³´ë‹ˆê¹Œ ì™œ ì´ë ‡ê²Œ ì˜¤ê·¸ë¼ë“œëƒ... ì§€ìš°ê³ ì‹¶ì§€ë§Œ ë‚¨ê²¨ë‘”ë‹¤. Â Â ì´ ë¸”ë¡œê·¸ë¥¼ ê°œì„¤í•œ ì´ìœ ëŠ” ë‚˜ë¥¼ ìµœëŒ€í•œ GEEKâ€¦","fields":{"slug":"/the-first-post/"},"frontmatter":{"date":"Jan 03, 2018","title":"ì²« ê¸€","tags":["undefined"],"update":"Jan 01, 0001"}}}]}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}